{"version":3,"sources":["webpack:///src/containers/ProfileContainer.js","webpack:///./src/widgets/Profile.ts","webpack:///./src/containers/ProfileContainer.ts","webpack:///./src/processes/profileProcesses.ts"],"names":["dojoWebpackJsonp_dojo2_realworld","100","module","exports","__webpack_require__","Object","defineProperty","value","tslib_1","WidgetBase_1","d_1","ArticlePreview_1","Profile","_super","apply","this","arguments","__extends","prototype","render","_a","properties","username","bio","image","articles","articleType","onFav","articleList","v","classes","filter","article","favorited","length","map","index","w","ArticlePreview","key","view","src","href","WidgetBase","90","getProperties","store","get","path","previousArticleType","profileProcesses_1","setArticleTypeProcess","getProfileProcess","getFavoritedArticlesProcess","getMyArticlesProcess","email","articleProcesses_1","favArticle","Container_1","Profile_1","ProfileContainer","Container","94","_this","process_1","operations_1","commandFactory","createCommandFactory","clearProfileArticlesCommand","_b","__read","payload","__awaiter","__generator","_c","replace","undefined","setUserNameCommand","getProfileCommand","response","json","label","fetch","sent","profile","getMyArticlesCommand","setArticleTypeCommand","getFavoritedCommand","token","headers","Headers","Content-Type","Authorization","createProcess"],"mappings":";;;;;;;AAOAA,kCAAkC,IAE5BC,IACA,SAAUC,EAAQC,EAASC,GAEjC,YAEAC,QAAOC,eAAeH,EAAS,cAAgBI,OAAO,GACtD,IAAIC,GAAUJ,EAAoB,GCflCK,EAAAL,EAAA,GACAM,EAAAN,EAAA,GAEAO,EAAAP,EAAA,IAYAQ,EAAA,SAAAC,GAAA,QAAAD,KDOQ,MAAkB,QAAXC,GAAmBA,EAAOC,MAAMC,KAAMC,YAAcD,KC2DnE,MAlE6BP,GAAAS,UAAAL,EAAAC,GAClBD,EAAAM,UAAAC,OAAV,WACK,GAAAC,GAAAL,KAAAM,WAAEC,EAAAF,EAAAE,SAAUC,EAAAH,EAAAG,IAAKC,EAAAJ,EAAAI,MAAOC,EAAAL,EAAAK,SAAUC,EAAAN,EAAAM,YAAaC,EAAAP,EAAAO,MAE/CC,EAAclB,EAAAmB,EAAE,OAASC,QAAS,oBAAsB,cAa5D,OAZAL,GAAWA,EAAWA,EAASM,OAAO,SAACC,GAAY,MAAAA,GAAQC,WAA6B,OAAhBP,IAAwBD,EAC5FA,GAAgC,IAApBA,EAASS,OACxBN,EAAclB,EAAAmB,EAAE,OAASC,QAAS,oBAAsB,2BAC9CL,GAAYA,EAASS,OAAS,IACxCN,EAAclB,EAAAmB,EACb,MACAJ,EAASU,IAAI,SAACH,EAASI,GACtB,MAAO1B,GAAA2B,EAAE1B,EAAA2B,gBAAkBC,IAAKH,EAAOJ,QAAOA,EAAEL,MAAKA,EAAEa,KAAM,gBAKzD9B,EAAAmB,EAAE,OAASC,QAAS,iBAC1BpB,EAAAmB,EAAE,OAASC,QAAS,cACnBpB,EAAAmB,EAAE,OAASC,QAAS,cACnBpB,EAAAmB,EAAE,OAASC,QAAS,QACnBpB,EAAAmB,EAAE,OAASC,SAAU,YAAa,YAAa,iBAC9CpB,EAAAmB,EAAE,OAASY,IAAKjB,EAAOM,QAAS,aAChCpB,EAAAmB,EAAE,MAAOP,IACTZ,EAAAmB,EAAE,KAAMN,IACRb,EAAAmB,EAAE,UAAYC,SAAU,MAAO,SAAU,wBAAyB,gBACjEpB,EAAAmB,EAAE,KAAOC,QAAS,mBAClB,WAAWR,YAMhBZ,EAAAmB,EAAE,OAASC,QAAS,cACnBpB,EAAAmB,EAAE,OAASC,QAAS,QACnBpB,EAAAmB,EAAE,OAASC,SAAU,YAAa,YAAa,iBAC9CpB,EAAAmB,EAAE,OAASC,QAAS,oBACnBpB,EAAAmB,EAAE,MAAQC,SAAU,MAAO,YAAa,oBACvCpB,EAAAmB,EAAE,MAAQC,QAAS,aAClBpB,EAAAmB,EACC,KAECa,KAAM,SAASpB,EACfQ,SAAU,WAA4B,OAAhBJ,EAAuB,SAAW,QAExD,kBAGHhB,EAAAmB,EAAE,MAAQC,QAAS,aAClBpB,EAAAmB,EACC,KAECa,KAAM,SAASpB,EAAQ,aACvBQ,SAAU,WAA4B,QAAhBJ,EAAwB,SAAW,QAEzD,6BAKLE,WAMNhB,GAlE6BH,EAAAkC,WAAhBxC,GAAAS,WDqEPgC,GACA,SAAU1C,EAAQC,EAASC,GAEjC,YE5EA,SAAAyC,GAAuBC,EAAmBzB,GACjC,GAAA0B,GAAAD,EAAAC,IAAKC,EAAAF,EAAAE,KACLtB,EAAAL,EAAAK,YACFJ,EAAWyB,EAAIC,EAAK,UAAW,aAC/BC,EAAsBF,EAAIC,EAAK,UAAW,eAkBhD,OAfAE,GAAAC,sBAAsBL,GAAOpB,GACzBJ,IAAaD,EAAWC,UAC3B4B,EAAAE,kBAAkBN,GAAOzB,EAAWC,UAChB,QAAhBI,EACHwB,EAAAG,4BAA4BP,GAAOzB,EAAWC,UAE9C4B,EAAAI,qBAAqBR,GAAOzB,EAAWC,WAE9BI,IAAgBuB,IACN,QAAhBvB,EACHwB,EAAAG,4BAA4BP,GAAOzB,EAAWC,UAE9C4B,EAAAI,qBAAqBR,GAAOzB,EAAWC,YAIxCC,IAAKwB,EAAIC,EAAK,UAAW,QACzB1B,SAAUyB,EAAIC,EAAK,UAAW,aAC9BxB,MAAOuB,EAAIC,EAAK,UAAW,UAC3BO,MAAOR,EAAIC,EAAK,UAAW,UAC3BvB,SAAUsB,EAAIC,EAAK,UAAW,aAC9BtB,YAAaqB,EAAIC,EAAK,UAAW,gBACjCrB,MAAO6B,EAAAC,WAAWX,IFiDpBzC,OAAOC,eAAeH,EAAS,cAAgBI,OAAO,GEzFtD,IAAAmD,GAAAtD,EAAA,IAEAuD,EAAAvD,EAAA,KACA8C,EAAA9C,EAAA,IAMAoD,EAAApD,EAAA,GAmCaD,GAAAyD,iBAAmBF,EAAAG,UAAUF,EAAA/C,QAAS,SAAWiC,cAAaA,KFyFrEiB,GACA,SAAU5D,EAAQC,EAASC,GAEjC,YGxIA,IAAA2D,GAAAhD,IH2IAV,QAAOC,eAAeH,EAAS,cAAgBI,OAAO,GACtD,IAAIC,GAAUJ,EAAoB,GG5IlC4D,EAAA5D,EAAA,GAEA6D,EAAA7D,EAAA,IAEM8D,EAAiBF,EAAAG,uBAEjBC,EAA8BF,EAAe,SAAO9C,GH2ItD,GG3I6D4B,IAAL5B,EAAA2B,IAAK3B,EAAA4B,MAAMqB,EAAA7D,EAAA8D,OAAAlD,EAAAmD,QAAA,EAAUF,GAAA,EH4I7E,OAAO7D,GAAQgE,UAAUT,MAAO,OAAQ,GAAQ,WAC5C,MAAOvD,GAAQiE,YAAY1D,KAAM,SAAU2D,GG1IlD,UAAQT,EAAAU,QAAQ3B,EAAK,UAAW,gBAAa4B,YAGxCC,EAAqBX,EAAe,SAAO9C,GH6I7C,GG7IoD4B,IAAL5B,EAAA2B,IAAK3B,EAAA4B,MAAMqB,EAAA7D,EAAA8D,OAAAlD,EAAAmD,QAAA,GAAUjD,EAAA+C,EAAA,EH8IpE,OAAO7D,GAAQgE,UAAUT,MAAO,OAAQ,GAAQ,WAC5C,MAAOvD,GAAQiE,YAAY1D,KAAM,SAAU2D,GG9IlD,UAAQT,EAAAU,QAAQ3B,EAAK,UAAW,YAAa1B,WAGxCwD,EAAoBZ,EAAe,SAAO9C,GHiJ5C,GGjJmD4B,IAAL5B,EAAA2B,IAAK3B,EAAA4B,MAAMqB,EAAA7D,EAAA8D,OAAAlD,EAAAmD,QAAA,GAAUjD,EAAA+C,EAAA,EHkJnE,OAAO7D,GAAQgE,UAAUT,MAAO,OAAQ,GAAQ,WAC5C,GAAIgB,GAAUC,CACd,OAAOxE,GAAQiE,YAAY1D,KAAM,SAAU2D,GACvC,OAAQA,EAAGO,OACP,IAAK,GGrJH,SAAMC,MAAM,mDAAmD5D,GHsJjE,KAAK,GGrJP,MADPyD,GAAWL,EAAAS,QACJ,EAAMJ,EAASC,OHwJb,KAAK,GGtJpB,MAFMA,GAAON,EAAAS,QAEb,GACClB,EAAAU,QAAQ3B,EAAK,UAAW,SAAUgC,EAAKI,QAAQ5D,OAC/CyC,EAAAU,QAAQ3B,EAAK,UAAW,OAAQgC,EAAKI,QAAQ7D,KAC7C0C,EAAAU,QAAQ3B,EAAK,UAAW,SAAUgC,EAAKI,QAAQ7B,gBAI3C8B,EAAuBnB,EAAe,SAAO9C,GH2J/C,GG3JsD4B,IAAL5B,EAAA2B,IAAK3B,EAAA4B,MAAMqB,EAAA7D,EAAA8D,OAAAlD,EAAAmD,QAAA,GAAUjD,EAAA+C,EAAA,EH4JtE,OAAO7D,GAAQgE,UAAUT,MAAO,OAAQ,GAAQ,WAC5C,GAAIgB,GAAUC,CACd,OAAOxE,GAAQiE,YAAY1D,KAAM,SAAU2D,GACvC,OAAQA,EAAGO,OACP,IAAK,GG/JH,SAAMC,MAAM,0DAA0D5D,GHgKxE,KAAK,GG/JP,MADPyD,GAAWL,EAAAS,QACJ,EAAMJ,EAASC,OHkKb,KAAK,GGhKpB,MAFMA,GAAON,EAAAS,QAEb,GAAQlB,EAAAU,QAAQ3B,EAAK,UAAW,YAAagC,EAAKvD,mBAG7C6D,EAAwBpB,EAAe,SAAC9C,GHqK1C,GGrKiD4B,IAAL5B,EAAA2B,IAAK3B,EAAA4B,MAAMqB,EAAA7D,EAAA8D,OAAAlD,EAAAmD,QAAA,GAAU7C,EAAA2C,EAAA,EACpE,QAAQJ,EAAAU,QAAQ3B,EAAK,UAAW,eAAgBtB,MAG3C6D,EAAsBrB,EAAe,SAAO9C,GHqK9C,GGrKgD2B,GAAA3B,EAAA2B,IAAKC,EAAA5B,EAAA4B,KAAMqB,EAAA7D,EAAA8D,OAAAlD,EAAAmD,QAAA,GAAUjD,EAAA+C,EAAA,EHsKrE,OAAO7D,GAAQgE,UAAUT,MAAO,OAAQ,GAAQ,WAC5C,GAAIyB,GAAOC,EAASV,EAAUC,CAC9B,OAAOxE,GAAQiE,YAAY1D,KAAM,SAAU2D,GACvC,OAAQA,EAAGO,OACP,IAAK,GGjKH,MARXO,GAAQzC,EAAIC,EAAK,UAAW,UAC9ByC,KACAD,IACHC,EAAU,GAAIC,UACbC,eAAgB,mBAChBC,cAAe,SAASJ,MAGT,EAAMN,MAAM,6DAA6D5D,GAAcmE,QAAOA,IH2KhG,KAAK,GG1KP,MADPV,GAAWL,EAAAS,QACJ,EAAMJ,EAASC,OH6Kb,KAAK,GG3KpB,MAFMA,GAAON,EAAAS,QAEb,GAAQlB,EAAAU,QAAQ3B,EAAK,UAAW,YAAagC,EAAKvD,kBAGtCtB,GAAAgD,sBAAwBa,EAAA6B,eAAeP,IACvCnF,EAAAiD,kBAAoBY,EAAA6B,eAAezB,EAA6BS,EAAoBC,IACpF3E,EAAAmD,qBAAuBU,EAAA6B,eAAezB,EAA6BiB,IACnElF,EAAAkD,4BAA8BW,EAAA6B,eAAezB,EAA6BmB","file":"src/containers/ProfileContainer.js","sourcesContent":["/*!\n * [Dojo](https://dojo.io/)\n * Copyright [JS Foundation](https://js.foundation/) & contributors\n * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)\n * All rights reserved\n * \n */\ndojoWebpackJsonp_dojo2_realworld([2],{\n\n/***/ 100:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(0);\nvar WidgetBase_1 = __webpack_require__(3);\nvar d_1 = __webpack_require__(2);\nvar ArticlePreview_1 = __webpack_require__(40);\nvar Profile = /** @class */ (function (_super) {\n    tslib_1.__extends(Profile, _super);\n    function Profile() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Profile.prototype.render = function () {\n        var _a = this.properties, username = _a.username, bio = _a.bio, image = _a.image, articles = _a.articles, articleType = _a.articleType, onFav = _a.onFav;\n        var articleList = d_1.v('div', { classes: 'article-preview' }, ['Loading...']);\n        articles = articles ? articles.filter(function (article) { return article.favorited || articleType === 'my'; }) : articles;\n        if (articles && articles.length === 0) {\n            articleList = d_1.v('div', { classes: 'article-preview' }, ['No articles here, yet!']);\n        }\n        else if (articles && articles.length > 0) {\n            articleList = d_1.v('div', articles.map(function (article, index) {\n                return d_1.w(ArticlePreview_1.ArticlePreview, { key: index, article: article, onFav: onFav, view: 'profile' });\n            }));\n        }\n        return d_1.v('div', { classes: 'profile-page' }, [\n            d_1.v('div', { classes: 'user-info' }, [\n                d_1.v('div', { classes: 'container' }, [\n                    d_1.v('div', { classes: 'row' }, [\n                        d_1.v('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n                            d_1.v('img', { src: image, classes: 'user-img' }),\n                            d_1.v('h4', [username]),\n                            d_1.v('p', [bio]),\n                            d_1.v('button', { classes: ['btn', 'btn-sm', 'btn-outline-secondary', 'action-btn'] }, [\n                                d_1.v('i', { classes: 'ion-plus-round' }),\n                                \" Follow \" + username\n                            ])\n                        ])\n                    ])\n                ])\n            ]),\n            d_1.v('div', { classes: 'container' }, [\n                d_1.v('div', { classes: 'row' }, [\n                    d_1.v('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n                        d_1.v('div', { classes: 'articles-toggle' }, [\n                            d_1.v('ul', { classes: ['nav', 'nav-pills', 'outline-active'] }, [\n                                d_1.v('li', { classes: 'nav-item' }, [\n                                    d_1.v('a', {\n                                        href: \"#user/\" + username,\n                                        classes: ['nav-link', articleType === 'my' ? 'active' : null]\n                                    }, ['My Articles'])\n                                ]),\n                                d_1.v('li', { classes: 'nav-item' }, [\n                                    d_1.v('a', {\n                                        href: \"#user/\" + username + \"/favorites\",\n                                        classes: ['nav-link', articleType === 'fav' ? 'active' : null]\n                                    }, ['Favorited Articles'])\n                                ])\n                            ])\n                        ]),\n                        articleList\n                    ])\n                ])\n            ])\n        ]);\n    };\n    return Profile;\n}(WidgetBase_1.WidgetBase));\nexports.Profile = Profile;\n\n\n/***/ }),\n\n/***/ 90:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Container_1 = __webpack_require__(18);\nvar Profile_1 = __webpack_require__(100);\nvar profileProcesses_1 = __webpack_require__(94);\nvar articleProcesses_1 = __webpack_require__(38);\nfunction getProperties(store, properties) {\n    var get = store.get, path = store.path;\n    var articleType = properties.articleType;\n    var username = get(path('profile', 'username'));\n    var previousArticleType = get(path('profile', 'articleType'));\n    // TODO clean this logic up, using loading/loaded\n    profileProcesses_1.setArticleTypeProcess(store)(articleType);\n    if (username !== properties.username) {\n        profileProcesses_1.getProfileProcess(store)(properties.username);\n        if (articleType === 'fav') {\n            profileProcesses_1.getFavoritedArticlesProcess(store)(properties.username);\n        }\n        else {\n            profileProcesses_1.getMyArticlesProcess(store)(properties.username);\n        }\n    }\n    else if (articleType !== previousArticleType) {\n        if (articleType === 'fav') {\n            profileProcesses_1.getFavoritedArticlesProcess(store)(properties.username);\n        }\n        else {\n            profileProcesses_1.getMyArticlesProcess(store)(properties.username);\n        }\n    }\n    return {\n        bio: get(path('profile', 'bio')),\n        username: get(path('profile', 'username')),\n        image: get(path('profile', 'image')),\n        email: get(path('profile', 'email')),\n        articles: get(path('profile', 'articles')),\n        articleType: get(path('profile', 'articleType')),\n        onFav: articleProcesses_1.favArticle(store)\n    };\n}\nexports.ProfileContainer = Container_1.Container(Profile_1.Profile, 'state', { getProperties: getProperties });\n\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar _this = this;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(0);\nvar process_1 = __webpack_require__(9);\nvar operations_1 = __webpack_require__(10);\nvar commandFactory = process_1.createCommandFactory();\nvar clearProfileArticlesCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_c) {\n            return [2 /*return*/, [operations_1.replace(path('profile', 'articles'), undefined)]];\n        });\n    });\n});\nvar setUserNameCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_c) {\n            return [2 /*return*/, [operations_1.replace(path('profile', 'username'), username)]];\n        });\n    });\n});\nvar getProfileCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var response, json;\n        return tslib_1.__generator(this, function (_c) {\n            switch (_c.label) {\n                case 0: return [4 /*yield*/, fetch(\"https://conduit.productionready.io/api/profiles/\" + username)];\n                case 1:\n                    response = _c.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _c.sent();\n                    return [2 /*return*/, [\n                            operations_1.replace(path('profile', 'image'), json.profile.image),\n                            operations_1.replace(path('profile', 'bio'), json.profile.bio),\n                            operations_1.replace(path('profile', 'email'), json.profile.email)\n                        ]];\n            }\n        });\n    });\n});\nvar getMyArticlesCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var response, json;\n        return tslib_1.__generator(this, function (_c) {\n            switch (_c.label) {\n                case 0: return [4 /*yield*/, fetch(\"https://conduit.productionready.io/api/articles?author=\" + username)];\n                case 1:\n                    response = _c.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _c.sent();\n                    return [2 /*return*/, [operations_1.replace(path('profile', 'articles'), json.articles)]];\n            }\n        });\n    });\n});\nvar setArticleTypeCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), articleType = _b[0];\n    return [operations_1.replace(path('profile', 'articleType'), articleType)];\n});\nvar getFavoritedCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var token, headers, response, json;\n        return tslib_1.__generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    token = get(path('session', 'token'));\n                    headers = {};\n                    if (token) {\n                        headers = new Headers({\n                            'Content-Type': 'application/json',\n                            Authorization: \"Token \" + token\n                        });\n                    }\n                    return [4 /*yield*/, fetch(\"https://conduit.productionready.io/api/articles?favorited=\" + username, { headers: headers })];\n                case 1:\n                    response = _c.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _c.sent();\n                    return [2 /*return*/, [operations_1.replace(path('profile', 'articles'), json.articles)]];\n            }\n        });\n    });\n});\nexports.setArticleTypeProcess = process_1.createProcess([setArticleTypeCommand]);\nexports.getProfileProcess = process_1.createProcess([clearProfileArticlesCommand, setUserNameCommand, getProfileCommand]);\nexports.getMyArticlesProcess = process_1.createProcess([clearProfileArticlesCommand, getMyArticlesCommand]);\nexports.getFavoritedArticlesProcess = process_1.createProcess([clearProfileArticlesCommand, getFavoritedCommand]);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// src/containers/ProfileContainer.js","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v, w } from '@dojo/widget-core/d';\n\nimport { ArticlePreview } from './ArticlePreview';\n\nexport interface ProfileProperties {\n\tusername: string;\n\tbio: string;\n\timage: string;\n\temail: string;\n\tarticles: any[];\n\tarticleType: string;\n\tonFav: Function;\n}\n\nexport class Profile extends WidgetBase<ProfileProperties> {\n\tprotected render() {\n\t\tlet { username, bio, image, articles, articleType, onFav } = this.properties;\n\n\t\tlet articleList = v('div', { classes: 'article-preview' }, ['Loading...']);\n\t\tarticles = articles ? articles.filter((article) => article.favorited || articleType === 'my') : articles;\n\t\tif (articles && articles.length === 0) {\n\t\t\tarticleList = v('div', { classes: 'article-preview' }, ['No articles here, yet!']);\n\t\t} else if (articles && articles.length > 0) {\n\t\t\tarticleList = v(\n\t\t\t\t'div',\n\t\t\t\tarticles.map((article, index) => {\n\t\t\t\t\treturn w(ArticlePreview, { key: index, article, onFav, view: 'profile' });\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\treturn v('div', { classes: 'profile-page' }, [\n\t\t\tv('div', { classes: 'user-info' }, [\n\t\t\t\tv('div', { classes: 'container' }, [\n\t\t\t\t\tv('div', { classes: 'row' }, [\n\t\t\t\t\t\tv('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n\t\t\t\t\t\t\tv('img', { src: image, classes: 'user-img' }),\n\t\t\t\t\t\t\tv('h4', [username]),\n\t\t\t\t\t\t\tv('p', [bio]),\n\t\t\t\t\t\t\tv('button', { classes: ['btn', 'btn-sm', 'btn-outline-secondary', 'action-btn'] }, [\n\t\t\t\t\t\t\t\tv('i', { classes: 'ion-plus-round' }),\n\t\t\t\t\t\t\t\t` Follow ${username}`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t]),\n\t\t\tv('div', { classes: 'container' }, [\n\t\t\t\tv('div', { classes: 'row' }, [\n\t\t\t\t\tv('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n\t\t\t\t\t\tv('div', { classes: 'articles-toggle' }, [\n\t\t\t\t\t\t\tv('ul', { classes: ['nav', 'nav-pills', 'outline-active'] }, [\n\t\t\t\t\t\t\t\tv('li', { classes: 'nav-item' }, [\n\t\t\t\t\t\t\t\t\tv(\n\t\t\t\t\t\t\t\t\t\t'a',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\thref: `#user/${username}`,\n\t\t\t\t\t\t\t\t\t\t\tclasses: ['nav-link', articleType === 'my' ? 'active' : null]\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t['My Articles']\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\tv('li', { classes: 'nav-item' }, [\n\t\t\t\t\t\t\t\t\tv(\n\t\t\t\t\t\t\t\t\t\t'a',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\thref: `#user/${username}/favorites`,\n\t\t\t\t\t\t\t\t\t\t\tclasses: ['nav-link', articleType === 'fav' ? 'active' : null]\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t['Favorited Articles']\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tarticleList\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t])\n\t\t]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Profile.ts","import { Container } from '@dojo/widget-core/Container';\nimport { Store } from '@dojo/stores/Store';\nimport { Profile, ProfileProperties } from './../widgets/Profile';\nimport {\n\tgetProfileProcess,\n\tsetArticleTypeProcess,\n\tgetMyArticlesProcess,\n\tgetFavoritedArticlesProcess\n} from './../processes/profileProcesses';\nimport { favArticle } from './../processes/articleProcesses';\n\nfunction getProperties(store: Store<any>, properties: ProfileProperties): ProfileProperties {\n\tconst { get, path } = store;\n\tconst { articleType } = properties;\n\tconst username = get(path('profile', 'username'));\n\tconst previousArticleType = get(path('profile', 'articleType'));\n\n\t// TODO clean this logic up, using loading/loaded\n\tsetArticleTypeProcess(store)(articleType);\n\tif (username !== properties.username) {\n\t\tgetProfileProcess(store)(properties.username);\n\t\tif (articleType === 'fav') {\n\t\t\tgetFavoritedArticlesProcess(store)(properties.username);\n\t\t} else {\n\t\t\tgetMyArticlesProcess(store)(properties.username);\n\t\t}\n\t} else if (articleType !== previousArticleType) {\n\t\tif (articleType === 'fav') {\n\t\t\tgetFavoritedArticlesProcess(store)(properties.username);\n\t\t} else {\n\t\t\tgetMyArticlesProcess(store)(properties.username);\n\t\t}\n\t}\n\treturn {\n\t\tbio: get(path('profile', 'bio')),\n\t\tusername: get(path('profile', 'username')),\n\t\timage: get(path('profile', 'image')),\n\t\temail: get(path('profile', 'email')),\n\t\tarticles: get(path('profile', 'articles')),\n\t\tarticleType: get(path('profile', 'articleType')),\n\t\tonFav: favArticle(store)\n\t};\n}\n\nexport const ProfileContainer = Container(Profile, 'state', { getProperties });\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader?{\"tsConfigFile\":\"/Users/Anthony/development/test-beds/dojo2-realworld/tslint.json\",\"emitErrors\":true,\"failOnHint\":true}!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/containers/ProfileContainer.ts","import { createCommandFactory, createProcess } from '@dojo/stores/process';\nimport { PatchOperation } from '@dojo/stores/state/Patch';\nimport { replace } from '@dojo/stores/state/operations';\n\nconst commandFactory = createCommandFactory<any>();\n\nconst clearProfileArticlesCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<\n\tPatchOperation[]\n> => {\n\treturn [replace(path('profile', 'articles'), undefined)];\n});\n\nconst setUserNameCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<PatchOperation[]> => {\n\treturn [replace(path('profile', 'username'), username)];\n});\n\nconst getProfileCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<PatchOperation[]> => {\n\tconst response = await fetch(`https://conduit.productionready.io/api/profiles/${username}`);\n\tconst json = await response.json();\n\n\treturn [\n\t\treplace(path('profile', 'image'), json.profile.image),\n\t\treplace(path('profile', 'bio'), json.profile.bio),\n\t\treplace(path('profile', 'email'), json.profile.email)\n\t];\n});\n\nconst getMyArticlesCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<PatchOperation[]> => {\n\tconst response = await fetch(`https://conduit.productionready.io/api/articles?author=${username}`);\n\tconst json = await response.json();\n\n\treturn [replace(path('profile', 'articles'), json.articles)];\n});\n\nconst setArticleTypeCommand = commandFactory(({ get, path, payload: [articleType] }): PatchOperation[] => {\n\treturn [replace(path('profile', 'articleType'), articleType)];\n});\n\nconst getFavoritedCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<PatchOperation[]> => {\n\tconst token = get(path('session', 'token'));\n\tlet headers = {};\n\tif (token) {\n\t\theaders = new Headers({\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Token ${token}`\n\t\t});\n\t}\n\tconst response = await fetch(`https://conduit.productionready.io/api/articles?favorited=${username}`, { headers });\n\tconst json = await response.json();\n\n\treturn [replace(path('profile', 'articles'), json.articles)];\n});\n\nexport const setArticleTypeProcess = createProcess([setArticleTypeCommand]);\nexport const getProfileProcess = createProcess([clearProfileArticlesCommand, setUserNameCommand, getProfileCommand]);\nexport const getMyArticlesProcess = createProcess([clearProfileArticlesCommand, getMyArticlesCommand]);\nexport const getFavoritedArticlesProcess = createProcess([clearProfileArticlesCommand, getFavoritedCommand]);\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/processes/profileProcesses.ts"],"sourceRoot":""}