{"version":3,"sources":["webpack:///src/containers/ProfileContainer.js","webpack:///./src/widgets/Profile.ts","webpack:///./src/containers/ProfileContainer.ts","webpack:///./src/processes/profileProcesses.ts"],"names":["dojoWebpackJsonp_dojo2_realworld","106","module","exports","__webpack_require__","Object","defineProperty","value","tslib_1","WidgetBase_1","d_1","Link_1","FeedsContainer_1","Profile","_super","apply","this","arguments","__extends","prototype","_onFollowUser","_a","properties","followUser","following","username","render","currentUser","bio","image","type","isCurrentUser","v","classes","src","w","Link","to","onclick","FeedsContainer","key","WidgetBase","91","getProperties","store","get","path","loaded","loading","profileProcesses_1","getProfileProcess","followUserProcess","Container_1","Profile_1","ProfileContainer","Container","97","_this","process_1","operations_1","utils_1","commandFactory","createCommandFactory","startGetProfileCommand","_b","__read","payload","__awaiter","__generator","_c","replace","followUserCommand","at","token","response","json","label","fetch","method","headers","getHeaders","sent","profile","getProfileCommand","createProcess"],"mappings":";;;;;;;AAOAA,kCAAkC,IAE5BC,IACA,SAAUC,EAAQC,EAASC,GAEjC,YAEAC,QAAOC,eAAeH,EAAS,cAAgBI,OAAO,GACtD,IAAIC,GAAUJ,EAAoB,GCflCK,EAAAL,EAAA,GACAM,EAAAN,EAAA,GACAO,EAAAP,EAAA,IAEAQ,EAAAR,EAAA,IAYAS,EAAA,SAAAC,GAAA,QAAAD,KDOQ,MAAkB,QAAXC,GAAmBA,EAAOC,MAAMC,KAAMC,YAAcD,KC8CnE,MArD6BR,GAAAU,UAAAL,EAAAC,GACpBD,EAAAM,UAAAC,cAAR,WACO,GAAAC,GAAAL,KAAAM,WAAEC,EAAAF,EAAAE,WAAYC,EAAAH,EAAAG,SACpBD,GAD+BF,EAAAI,SACVD,IAGZX,EAAAM,UAAAO,OAAV,WACK,GAAAL,GAAAL,KAAAM,WAAEK,EAAAN,EAAAM,YAAaF,EAAAJ,EAAAI,SAAUG,EAAAP,EAAAO,IAAKC,EAAAR,EAAAQ,MAAOC,EAAAT,EAAAS,KAAMN,EAAAH,EAAAG,UACzCO,EAAgBJ,IAAgBF,CAEtC,OAAOf,GAAAsB,EAAE,OAASC,QAAS,iBAC1BvB,EAAAsB,EAAE,OAASC,QAAS,cACnBvB,EAAAsB,EAAE,OAASC,QAAS,cACnBvB,EAAAsB,EAAE,OAASC,QAAS,QACnBvB,EAAAsB,EAAE,OAASC,SAAU,YAAa,YAAa,iBAC9CvB,EAAAsB,EAAE,OAASE,IAAKL,EAAOI,QAAS,aAChCvB,EAAAsB,EAAE,MAAOP,IACTf,EAAAsB,EAAE,KAAMJ,IACRG,EACGrB,EAAAyB,EACAxB,EAAAyB,MAECC,GAAI,WACJJ,SAAU,MAAO,SAAU,wBAAyB,gBAEpDvB,EAAAsB,EAAE,KAAOC,QAAS,aAAe,2BAElCvB,EAAAsB,EACA,UAECM,QAAStB,KAAKI,cACda,SACC,MACA,SACAT,EAAY,gBAAkB,wBAC9B,gBAIDd,EAAAsB,EAAE,KAAOC,QAAS,mBAClBT,EAAY,aAAe,WAC3BC,YAORf,EAAAsB,EAAE,OAASC,QAAS,cACnBvB,EAAAsB,EAAE,OAASC,QAAS,QAAUvB,EAAAyB,EAAEvB,EAAA2B,gBAAkBC,IAAKf,EAAUK,KAAIA,EAAEL,SAAQA,WAInFZ,GArD6BJ,EAAAgC,WAAhBtC,GAAAU,WD0DP6B,GACA,SAAUxC,EAAQC,EAASC,GAEjC,YEvEA,SAAAuC,GAAuBC,EAAqBtB,GACnC,GAAAuB,GAAAD,EAAAC,IAAKC,EAAAF,EAAAE,KAEPC,EAASF,EAAIC,EAAK,UAAW,WAC7BE,EAAUH,EAAIC,EAAK,UAAW,WAMpC,OAJKC,IAAWC,GAAW1B,EAAWG,WAAaoB,EAAIC,EAAK,UAAW,cACtEG,EAAAC,kBAAkBN,GAAOtB,EAAWG,WAIpCA,SAAUH,EAAWG,SACrBK,KAAMR,EAAWQ,KACjBD,MAAOgB,EAAIC,EAAK,UAAW,UAC3BlB,IAAKiB,EAAIC,EAAK,UAAW,QACzBtB,UAAWqB,EAAIC,EAAK,UAAW,cAC/BvB,WAAY0B,EAAAE,kBAAkBP,GAC9BjB,YAAakB,EAAIC,EAAK,OAAQ,cFwDhCzC,OAAOC,eAAeH,EAAS,cAAgBI,OAAO,GE/EtD,IAAA6C,GAAAhD,EAAA,IAEAiD,EAAAjD,EAAA,KAEA6C,EAAA7C,EAAA,GAuBaD,GAAAmD,iBAAmBF,EAAAG,UAAUF,EAAAxC,QAAS,SAAW8B,cAAaA,KF8ErEa,GACA,SAAUtD,EAAQC,EAASC,GAEjC,YG5GA,IAAAqD,GAAAzC,IH+GAX,QAAOC,eAAeH,EAAS,cAAgBI,OAAO,GACtD,IAAIC,GAAUJ,EAAoB,GGhHlCsD,EAAAtD,EAAA,IAEAuD,EAAAvD,EAAA,IAEAwD,EAAAxD,EAAA,IAEMyD,EAAiBH,EAAAI,uBAEjBC,EAAyBF,EAAe,SAAOxC,GH8GjD,GG9GwDyB,IAALzB,EAAAwB,IAAKxB,EAAAyB,MAAMkB,EAAAxD,EAAAyD,OAAA5C,EAAA6C,QAAA,EAAUF,GAAA,EH+GxE,OAAOxD,GAAQ2D,UAAUV,MAAO,OAAQ,GAAQ,WAC5C,MAAOjD,GAAQ4D,YAAYpD,KAAM,SAAUqD,GG/GlD,UAAQV,EAAAW,QAAQxB,EAAK,UAAW,YAAY,GAAOa,EAAAW,QAAQxB,EAAK,UAAW,WAAW,WAGjFyB,EAAoBV,EAAe,SAAOxC,GHkH5C,GGlHkDwB,IAAJxB,EAAAmD,GAAInD,EAAAwB,KAAKC,EAAAzB,EAAAyB,KAAMkB,EAAAxD,EAAAyD,OAAA5C,EAAA6C,QAAA,GAAUzC,EAAAuC,EAAA,GAAUxC,EAAAwC,EAAA,EHmHjF,OAAOxD,GAAQ2D,UAAUV,MAAO,OAAQ,GAAQ,WAC5C,GAAIgB,GAAOC,EAAUC,CACrB,OAAOnE,GAAQ4D,YAAYpD,KAAM,SAAUqD,GACvC,OAAQA,EAAGO,OACP,IAAK,GGrHH,MADXH,GAAQ5B,EAAIC,EAAK,OAAQ,WACd,EAAM+B,MAAM,mDAAmDpD,EAAQ,WACvFqD,OAAQtD,EAAY,SAAW,OAC/BuD,QAASnB,EAAAoB,WAAWP,KHyHN,KAAK,GGvHP,MAJPC,GAAWL,EAAAY,QAIJ,EAAMP,EAASC,OH0Hb,KAAK,GGxHpB,MAFMA,GAAON,EAAAY,QAEb,GAAQtB,EAAAW,QAAQxB,EAAK,WAAY6B,EAAKO,kBAGjCC,EAAoBtB,EAAe,SAAOxC,GH6H5C,GG7H8CwB,GAAAxB,EAAAwB,IAAKC,EAAAzB,EAAAyB,KAAMkB,EAAAxD,EAAAyD,OAAA5C,EAAA6C,QAAA,GAAUzC,EAAAuC,EAAA,EH8HnE,OAAOxD,GAAQ2D,UAAUV,MAAO,OAAQ,GAAQ,WAC5C,GAAIgB,GAAOC,EAAUC,CACrB,OAAOnE,GAAQ4D,YAAYpD,KAAM,SAAUqD,GACvC,OAAQA,EAAGO,OACP,IAAK,GGhIH,MADXH,GAAQ5B,EAAIC,EAAK,OAAQ,WACd,EAAM+B,MAAM,mDAAmDpD,GAC/EsD,QAASnB,EAAAoB,WAAWP,KHoIN,KAAK,GGlIP,MAHPC,GAAWL,EAAAY,QAGJ,EAAMP,EAASC,OHqIb,KAAK,GGnIpB,MAFMA,GAAON,EAAAY,QAEb,GACCtB,EAAAW,QAAQxB,EAAK,UAAW,SAAU6B,EAAKO,QAAQrD,OAC/C8B,EAAAW,QAAQxB,EAAK,UAAW,OAAQ6B,EAAKO,QAAQtD,KAC7C+B,EAAAW,QAAQxB,EAAK,UAAW,YAAY,GACpCa,EAAAW,QAAQxB,EAAK,UAAW,WAAW,WAIxB3C,GAAA+C,kBAAoBQ,EAAA0B,eAAerB,EAAwBoB,IAC3DhF,EAAAgD,kBAAoBO,EAAA0B,eAAeb","file":"src/containers/ProfileContainer.js","sourcesContent":["/*!\n * [Dojo](https://dojo.io/)\n * Copyright [JS Foundation](https://js.foundation/) & contributors\n * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)\n * All rights reserved\n * \n */\ndojoWebpackJsonp_dojo2_realworld([5],{\n\n/***/ 106:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(0);\nvar WidgetBase_1 = __webpack_require__(3);\nvar d_1 = __webpack_require__(2);\nvar Link_1 = __webpack_require__(24);\nvar FeedsContainer_1 = __webpack_require__(41);\nvar Profile = /** @class */ (function (_super) {\n    tslib_1.__extends(Profile, _super);\n    function Profile() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Profile.prototype._onFollowUser = function () {\n        var _a = this.properties, followUser = _a.followUser, following = _a.following, username = _a.username;\n        followUser(username, following);\n    };\n    Profile.prototype.render = function () {\n        var _a = this.properties, currentUser = _a.currentUser, username = _a.username, bio = _a.bio, image = _a.image, type = _a.type, following = _a.following;\n        var isCurrentUser = currentUser === username;\n        return d_1.v('div', { classes: 'profile-page' }, [\n            d_1.v('div', { classes: 'user-info' }, [\n                d_1.v('div', { classes: 'container' }, [\n                    d_1.v('div', { classes: 'row' }, [\n                        d_1.v('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n                            d_1.v('img', { src: image, classes: 'user-img' }),\n                            d_1.v('h4', [username]),\n                            d_1.v('p', [bio]),\n                            isCurrentUser\n                                ? d_1.w(Link_1.Link, {\n                                    to: 'settings',\n                                    classes: ['btn', 'btn-sm', 'btn-outline-secondary', 'action-btn']\n                                }, [d_1.v('i', { classes: 'ion-edit' }), ' Edit Profile Settings'])\n                                : d_1.v('button', {\n                                    onclick: this._onFollowUser,\n                                    classes: [\n                                        'btn',\n                                        'btn-sm',\n                                        following ? 'btn-secondary' : 'btn-outline-secondary',\n                                        'action-btn'\n                                    ]\n                                }, [\n                                    d_1.v('i', { classes: 'ion-plus-round' }),\n                                    following ? ' UnFollow ' : ' Follow ',\n                                    username\n                                ])\n                        ])\n                    ])\n                ])\n            ]),\n            d_1.v('div', { classes: 'container' }, [\n                d_1.v('div', { classes: 'row' }, [d_1.w(FeedsContainer_1.FeedsContainer, { key: username, type: type, username: username })])\n            ])\n        ]);\n    };\n    return Profile;\n}(WidgetBase_1.WidgetBase));\nexports.Profile = Profile;\n\n\n/***/ }),\n\n/***/ 91:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Container_1 = __webpack_require__(18);\nvar Profile_1 = __webpack_require__(106);\nvar profileProcesses_1 = __webpack_require__(97);\nfunction getProperties(store, properties) {\n    var get = store.get, path = store.path;\n    var loaded = get(path('profile', 'loaded'));\n    var loading = get(path('profile', 'loading'));\n    if (!loaded && !loading && properties.username !== get(path('profile', 'username'))) {\n        profileProcesses_1.getProfileProcess(store)(properties.username);\n    }\n    return {\n        username: properties.username,\n        type: properties.type,\n        image: get(path('profile', 'image')),\n        bio: get(path('profile', 'bio')),\n        following: get(path('profile', 'following')),\n        followUser: profileProcesses_1.followUserProcess(store),\n        currentUser: get(path('user', 'username'))\n    };\n}\nexports.ProfileContainer = Container_1.Container(Profile_1.Profile, 'state', { getProperties: getProperties });\n\n\n/***/ }),\n\n/***/ 97:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar _this = this;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(0);\nvar process_1 = __webpack_require__(11);\nvar operations_1 = __webpack_require__(12);\nvar utils_1 = __webpack_require__(40);\nvar commandFactory = process_1.createCommandFactory();\nvar startGetProfileCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), type = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_c) {\n            return [2 /*return*/, [operations_1.replace(path('profile', 'loading'), true), operations_1.replace(path('profile', 'loaded'), false)]];\n        });\n    });\n});\nvar followUserCommand = commandFactory(function (_a) {\n    var at = _a.at, get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 2), username = _b[0], following = _b[1];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var token, response, json;\n        return tslib_1.__generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    token = get(path('user', 'token'));\n                    return [4 /*yield*/, fetch(\"https://conduit.productionready.io/api/profiles/\" + username + \"/follow\", {\n                            method: following ? 'delete' : 'post',\n                            headers: utils_1.getHeaders(token)\n                        })];\n                case 1:\n                    response = _c.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _c.sent();\n                    return [2 /*return*/, [operations_1.replace(path('profile'), json.profile)]];\n            }\n        });\n    });\n});\nvar getProfileCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var token, response, json;\n        return tslib_1.__generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    token = get(path('user', 'token'));\n                    return [4 /*yield*/, fetch(\"https://conduit.productionready.io/api/profiles/\" + username, {\n                            headers: utils_1.getHeaders(token)\n                        })];\n                case 1:\n                    response = _c.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _c.sent();\n                    return [2 /*return*/, [\n                            operations_1.replace(path('profile', 'image'), json.profile.image),\n                            operations_1.replace(path('profile', 'bio'), json.profile.bio),\n                            operations_1.replace(path('profile', 'loading'), false),\n                            operations_1.replace(path('profile', 'loaded'), true)\n                        ]];\n            }\n        });\n    });\n});\nexports.getProfileProcess = process_1.createProcess([startGetProfileCommand, getProfileCommand]);\nexports.followUserProcess = process_1.createProcess([followUserCommand]);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// src/containers/ProfileContainer.js","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v, w } from '@dojo/widget-core/d';\nimport { Link } from '@dojo/routing/Link';\n\nimport { FeedsContainer } from '../containers/FeedsContainer';\n\nexport interface ProfileProperties {\n\tusername: string;\n\tbio: string;\n\timage: string;\n\ttype: string;\n\tfollowing: boolean;\n\tfollowUser: Function;\n\tcurrentUser: string;\n}\n\nexport class Profile extends WidgetBase<ProfileProperties> {\n\tprivate _onFollowUser() {\n\t\tconst { followUser, following, username } = this.properties;\n\t\tfollowUser(username, following);\n\t}\n\n\tprotected render() {\n\t\tlet { currentUser, username, bio, image, type, following } = this.properties;\n\t\tconst isCurrentUser = currentUser === username;\n\n\t\treturn v('div', { classes: 'profile-page' }, [\n\t\t\tv('div', { classes: 'user-info' }, [\n\t\t\t\tv('div', { classes: 'container' }, [\n\t\t\t\t\tv('div', { classes: 'row' }, [\n\t\t\t\t\t\tv('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n\t\t\t\t\t\t\tv('img', { src: image, classes: 'user-img' }),\n\t\t\t\t\t\t\tv('h4', [username]),\n\t\t\t\t\t\t\tv('p', [bio]),\n\t\t\t\t\t\t\tisCurrentUser\n\t\t\t\t\t\t\t\t? w(\n\t\t\t\t\t\t\t\t\t\tLink,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tto: 'settings',\n\t\t\t\t\t\t\t\t\t\t\tclasses: ['btn', 'btn-sm', 'btn-outline-secondary', 'action-btn']\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t[v('i', { classes: 'ion-edit' }), ' Edit Profile Settings']\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: v(\n\t\t\t\t\t\t\t\t\t\t'button',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tonclick: this._onFollowUser,\n\t\t\t\t\t\t\t\t\t\t\tclasses: [\n\t\t\t\t\t\t\t\t\t\t\t\t'btn',\n\t\t\t\t\t\t\t\t\t\t\t\t'btn-sm',\n\t\t\t\t\t\t\t\t\t\t\t\tfollowing ? 'btn-secondary' : 'btn-outline-secondary',\n\t\t\t\t\t\t\t\t\t\t\t\t'action-btn'\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\tv('i', { classes: 'ion-plus-round' }),\n\t\t\t\t\t\t\t\t\t\t\tfollowing ? ' UnFollow ' : ' Follow ',\n\t\t\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t]),\n\t\t\tv('div', { classes: 'container' }, [\n\t\t\t\tv('div', { classes: 'row' }, [w(FeedsContainer, { key: username, type, username })])\n\t\t\t])\n\t\t]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Profile.ts","import { Container } from '@dojo/widget-core/Container';\nimport { Store } from '@dojo/stores/Store';\nimport { Profile, ProfileProperties } from './../widgets/Profile';\nimport { State } from '../interfaces';\nimport { getProfileProcess, followUserProcess } from './../processes/profileProcesses';\n\nfunction getProperties(store: Store<State>, properties: ProfileProperties): ProfileProperties {\n\tconst { get, path } = store;\n\n\tconst loaded = get(path('profile', 'loaded'));\n\tconst loading = get(path('profile', 'loading'));\n\n\tif (!loaded && !loading && properties.username !== get(path('profile', 'username'))) {\n\t\tgetProfileProcess(store)(properties.username as any);\n\t}\n\n\treturn {\n\t\tusername: properties.username,\n\t\ttype: properties.type,\n\t\timage: get(path('profile', 'image')),\n\t\tbio: get(path('profile', 'bio')),\n\t\tfollowing: get(path('profile', 'following')),\n\t\tfollowUser: followUserProcess(store),\n\t\tcurrentUser: get(path('user', 'username'))\n\t};\n}\n\nexport const ProfileContainer = Container(Profile, 'state', { getProperties });\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader?{\"tsConfigFile\":\"/Users/Anthony/development/test-beds/dojo2-realworld/tslint.json\",\"emitErrors\":true,\"failOnHint\":true}!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/containers/ProfileContainer.ts","import { createCommandFactory, createProcess } from '@dojo/stores/process';\nimport { PatchOperation } from '@dojo/stores/state/Patch';\nimport { replace } from '@dojo/stores/state/operations';\nimport { State } from '../interfaces';\nimport { getHeaders } from './utils';\n\nconst commandFactory = createCommandFactory<State>();\n\nconst startGetProfileCommand = commandFactory(async ({ get, path, payload: [type] }) => {\n\treturn [replace(path('profile', 'loading'), true), replace(path('profile', 'loaded'), false)];\n});\n\nconst followUserCommand = commandFactory(async ({ at, get, path, payload: [username, following] }) => {\n\tconst token = get(path('user', 'token'));\n\tconst response = await fetch(`https://conduit.productionready.io/api/profiles/${username}/follow`, {\n\t\tmethod: following ? 'delete' : 'post',\n\t\theaders: getHeaders(token)\n\t});\n\tconst json = await response.json();\n\n\treturn [replace(path('profile'), json.profile)];\n});\n\nconst getProfileCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<PatchOperation[]> => {\n\tconst token = get(path('user', 'token'));\n\tconst response = await fetch(`https://conduit.productionready.io/api/profiles/${username}`, {\n\t\theaders: getHeaders(token)\n\t});\n\tconst json = await response.json();\n\n\treturn [\n\t\treplace(path('profile', 'image'), json.profile.image),\n\t\treplace(path('profile', 'bio'), json.profile.bio),\n\t\treplace(path('profile', 'loading'), false),\n\t\treplace(path('profile', 'loaded'), true)\n\t];\n});\n\nexport const getProfileProcess = createProcess([startGetProfileCommand, getProfileCommand]);\nexport const followUserProcess = createProcess([followUserCommand]);\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/processes/profileProcesses.ts"],"sourceRoot":""}