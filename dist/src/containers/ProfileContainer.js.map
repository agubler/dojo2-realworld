{"version":3,"sources":["webpack:///src/containers/ProfileContainer.js","webpack:///./src/containers/ProfileContainer.ts","webpack:///./src/processes/profileProcesses.ts","webpack:///./src/widgets/Profile.ts"],"names":["dojoWebpackJsonp_dojo2_realworld","87","module","exports","__webpack_require__","getProperties","store","properties","get","path","articleType","username","previousArticleType","profileProcesses_1","setArticleTypeProcess","getProfileProcess","getFavoritedArticlesProcess","getMyArticlesProcess","bio","image","email","articles","onFav","articleProcesses_1","favArticle","Object","defineProperty","value","Container_1","Profile_1","ProfileContainer","Container","Profile","90","_this","this","tslib_1","process_1","operations_1","commandFactory","createCommandFactory","clearProfileArticlesCommand","_a","_b","__read","payload","__awaiter","__generator","_c","replace","undefined","setUserNameCommand","getProfileCommand","response","json","label","fetch","sent","profile","getMyArticlesCommand","setArticleTypeCommand","getFavoritedCommand","token","headers","Headers","Content-Type","Authorization","createProcess","94","WidgetBase_1","d_1","ArticlePreview_1","_super","apply","arguments","__extends","prototype","render","articleList","v","classes","filter","article","favorited","length","map","index","w","ArticlePreview","key","view","src","href","WidgetBase"],"mappings":"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","file":"src/containers/ProfileContainer.js","sourcesContent":["/*!\n * [Dojo](https://dojo.io/)\n * Copyright [JS Foundation](https://js.foundation/) & contributors\n * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)\n * All rights reserved\n * \n */\ndojoWebpackJsonp_dojo2_realworld([0],{\n\n/***/ 87:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Container_1 = __webpack_require__(18);\nvar Profile_1 = __webpack_require__(94);\nvar profileProcesses_1 = __webpack_require__(90);\nvar articleProcesses_1 = __webpack_require__(37);\nfunction getProperties(store, properties) {\n    var get = store.get, path = store.path;\n    var articleType = properties.articleType;\n    var username = get(path('profile', 'username'));\n    var previousArticleType = get(path('profile', 'articleType'));\n    // TODO clean this logic up, using loading/loaded\n    profileProcesses_1.setArticleTypeProcess(store)(articleType);\n    if (username !== properties.username) {\n        profileProcesses_1.getProfileProcess(store)(properties.username);\n        if (articleType === 'fav') {\n            profileProcesses_1.getFavoritedArticlesProcess(store)(properties.username);\n        }\n        else {\n            profileProcesses_1.getMyArticlesProcess(store)(properties.username);\n        }\n    }\n    else if (articleType !== previousArticleType) {\n        if (articleType === 'fav') {\n            profileProcesses_1.getFavoritedArticlesProcess(store)(properties.username);\n        }\n        else {\n            profileProcesses_1.getMyArticlesProcess(store)(properties.username);\n        }\n    }\n    return {\n        bio: get(path('profile', 'bio')),\n        username: get(path('profile', 'username')),\n        image: get(path('profile', 'image')),\n        email: get(path('profile', 'email')),\n        articles: get(path('profile', 'articles')),\n        articleType: get(path('profile', 'articleType')),\n        onFav: articleProcesses_1.favArticle(store)\n    };\n}\nexports.ProfileContainer = Container_1.Container(Profile_1.Profile, 'state', { getProperties: getProperties });\n\n\n/***/ }),\n\n/***/ 90:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar _this = this;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(0);\nvar process_1 = __webpack_require__(9);\nvar operations_1 = __webpack_require__(10);\nvar commandFactory = process_1.createCommandFactory();\nvar clearProfileArticlesCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_c) {\n            return [2 /*return*/, [operations_1.replace(path('profile', 'articles'), undefined)]];\n        });\n    });\n});\nvar setUserNameCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_c) {\n            return [2 /*return*/, [operations_1.replace(path('profile', 'username'), username)]];\n        });\n    });\n});\nvar getProfileCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var response, json;\n        return tslib_1.__generator(this, function (_c) {\n            switch (_c.label) {\n                case 0: return [4 /*yield*/, fetch(\"https://conduit.productionready.io/api/profiles/\" + username)];\n                case 1:\n                    response = _c.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _c.sent();\n                    return [2 /*return*/, [\n                            operations_1.replace(path('profile', 'image'), json.profile.image),\n                            operations_1.replace(path('profile', 'bio'), json.profile.bio),\n                            operations_1.replace(path('profile', 'email'), json.profile.email)\n                        ]];\n            }\n        });\n    });\n});\nvar getMyArticlesCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var response, json;\n        return tslib_1.__generator(this, function (_c) {\n            switch (_c.label) {\n                case 0: return [4 /*yield*/, fetch(\"https://conduit.productionready.io/api/articles?author=\" + username)];\n                case 1:\n                    response = _c.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _c.sent();\n                    return [2 /*return*/, [operations_1.replace(path('profile', 'articles'), json.articles)]];\n            }\n        });\n    });\n});\nvar setArticleTypeCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), articleType = _b[0];\n    return [operations_1.replace(path('profile', 'articleType'), articleType)];\n});\nvar getFavoritedCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, _b = tslib_1.__read(_a.payload, 1), username = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var token, headers, response, json;\n        return tslib_1.__generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    token = get(path('session', 'token'));\n                    headers = {};\n                    if (token) {\n                        headers = new Headers({\n                            'Content-Type': 'application/json',\n                            Authorization: \"Token \" + token\n                        });\n                    }\n                    return [4 /*yield*/, fetch(\"https://conduit.productionready.io/api/articles?favorited=\" + username, { headers: headers })];\n                case 1:\n                    response = _c.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _c.sent();\n                    return [2 /*return*/, [operations_1.replace(path('profile', 'articles'), json.articles)]];\n            }\n        });\n    });\n});\nexports.setArticleTypeProcess = process_1.createProcess([setArticleTypeCommand]);\nexports.getProfileProcess = process_1.createProcess([clearProfileArticlesCommand, setUserNameCommand, getProfileCommand]);\nexports.getMyArticlesProcess = process_1.createProcess([clearProfileArticlesCommand, getMyArticlesCommand]);\nexports.getFavoritedArticlesProcess = process_1.createProcess([clearProfileArticlesCommand, getFavoritedCommand]);\n\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(0);\nvar WidgetBase_1 = __webpack_require__(3);\nvar d_1 = __webpack_require__(2);\nvar ArticlePreview_1 = __webpack_require__(39);\nvar Profile = /** @class */ (function (_super) {\n    tslib_1.__extends(Profile, _super);\n    function Profile() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Profile.prototype.render = function () {\n        var _a = this.properties, username = _a.username, bio = _a.bio, image = _a.image, articles = _a.articles, articleType = _a.articleType, onFav = _a.onFav;\n        var articleList = d_1.v('div', { classes: 'article-preview' }, ['Loading...']);\n        articles = articles ? articles.filter(function (article) { return article.favorited || articleType === 'my'; }) : articles;\n        if (articles && articles.length === 0) {\n            articleList = d_1.v('div', { classes: 'article-preview' }, ['No articles here, yet!']);\n        }\n        else if (articles && articles.length > 0) {\n            articleList = d_1.v('div', articles.map(function (article, index) {\n                return d_1.w(ArticlePreview_1.ArticlePreview, { key: index, article: article, onFav: onFav, view: 'profile' });\n            }));\n        }\n        return d_1.v('div', { classes: 'profile-page' }, [\n            d_1.v('div', { classes: 'user-info' }, [\n                d_1.v('div', { classes: 'container' }, [\n                    d_1.v('div', { classes: 'row' }, [\n                        d_1.v('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n                            d_1.v('img', { src: image, classes: 'user-img' }),\n                            d_1.v('h4', [username]),\n                            d_1.v('p', [bio]),\n                            d_1.v('button', { classes: ['btn', 'btn-sm', 'btn-outline-secondary', 'action-btn'] }, [\n                                d_1.v('i', { classes: 'ion-plus-round' }),\n                                \" Follow \" + username\n                            ])\n                        ])\n                    ])\n                ])\n            ]),\n            d_1.v('div', { classes: 'container' }, [\n                d_1.v('div', { classes: 'row' }, [\n                    d_1.v('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n                        d_1.v('div', { classes: 'articles-toggle' }, [\n                            d_1.v('ul', { classes: ['nav', 'nav-pills', 'outline-active'] }, [\n                                d_1.v('li', { classes: 'nav-item' }, [\n                                    d_1.v('a', {\n                                        href: \"#user/\" + username,\n                                        classes: ['nav-link', articleType === 'my' ? 'active' : null]\n                                    }, ['My Articles'])\n                                ]),\n                                d_1.v('li', { classes: 'nav-item' }, [\n                                    d_1.v('a', {\n                                        href: \"#user/\" + username + \"/favorites\",\n                                        classes: ['nav-link', articleType === 'fav' ? 'active' : null]\n                                    }, ['Favorited Articles'])\n                                ])\n                            ])\n                        ]),\n                        articleList\n                    ])\n                ])\n            ])\n        ]);\n    };\n    return Profile;\n}(WidgetBase_1.WidgetBase));\nexports.Profile = Profile;\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// src/containers/ProfileContainer.js","import { Container } from '@dojo/widget-core/Container';\nimport { Store } from '@dojo/stores/Store';\nimport { Profile, ProfileProperties } from './../widgets/Profile';\nimport {\n\tgetProfileProcess,\n\tsetArticleTypeProcess,\n\tgetMyArticlesProcess,\n\tgetFavoritedArticlesProcess\n} from './../processes/profileProcesses';\nimport { favArticle } from './../processes/articleProcesses';\n\nfunction getProperties(store: Store<any>, properties: ProfileProperties): ProfileProperties {\n\tconst { get, path } = store;\n\tconst { articleType } = properties;\n\tconst username = get(path('profile', 'username'));\n\tconst previousArticleType = get(path('profile', 'articleType'));\n\n\t// TODO clean this logic up, using loading/loaded\n\tsetArticleTypeProcess(store)(articleType);\n\tif (username !== properties.username) {\n\t\tgetProfileProcess(store)(properties.username);\n\t\tif (articleType === 'fav') {\n\t\t\tgetFavoritedArticlesProcess(store)(properties.username);\n\t\t} else {\n\t\t\tgetMyArticlesProcess(store)(properties.username);\n\t\t}\n\t} else if (articleType !== previousArticleType) {\n\t\tif (articleType === 'fav') {\n\t\t\tgetFavoritedArticlesProcess(store)(properties.username);\n\t\t} else {\n\t\t\tgetMyArticlesProcess(store)(properties.username);\n\t\t}\n\t}\n\treturn {\n\t\tbio: get(path('profile', 'bio')),\n\t\tusername: get(path('profile', 'username')),\n\t\timage: get(path('profile', 'image')),\n\t\temail: get(path('profile', 'email')),\n\t\tarticles: get(path('profile', 'articles')),\n\t\tarticleType: get(path('profile', 'articleType')),\n\t\tonFav: favArticle(store)\n\t};\n}\n\nexport const ProfileContainer = Container(Profile, 'state', { getProperties });\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader?{\"tsConfigFile\":\"/Users/Anthony/development/test-beds/dojo2-realworld/tslint.json\",\"emitErrors\":true,\"failOnHint\":true}!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/containers/ProfileContainer.ts","import { createCommandFactory, createProcess } from '@dojo/stores/process';\nimport { PatchOperation } from '@dojo/stores/state/Patch';\nimport { replace } from '@dojo/stores/state/operations';\n\nconst commandFactory = createCommandFactory<any>();\n\nconst clearProfileArticlesCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<\n\tPatchOperation[]\n> => {\n\treturn [replace(path('profile', 'articles'), undefined)];\n});\n\nconst setUserNameCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<PatchOperation[]> => {\n\treturn [replace(path('profile', 'username'), username)];\n});\n\nconst getProfileCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<PatchOperation[]> => {\n\tconst response = await fetch(`https://conduit.productionready.io/api/profiles/${username}`);\n\tconst json = await response.json();\n\n\treturn [\n\t\treplace(path('profile', 'image'), json.profile.image),\n\t\treplace(path('profile', 'bio'), json.profile.bio),\n\t\treplace(path('profile', 'email'), json.profile.email)\n\t];\n});\n\nconst getMyArticlesCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<PatchOperation[]> => {\n\tconst response = await fetch(`https://conduit.productionready.io/api/articles?author=${username}`);\n\tconst json = await response.json();\n\n\treturn [replace(path('profile', 'articles'), json.articles)];\n});\n\nconst setArticleTypeCommand = commandFactory(({ get, path, payload: [articleType] }): PatchOperation[] => {\n\treturn [replace(path('profile', 'articleType'), articleType)];\n});\n\nconst getFavoritedCommand = commandFactory(async ({ get, path, payload: [username] }): Promise<PatchOperation[]> => {\n\tconst token = get(path('session', 'token'));\n\tlet headers = {};\n\tif (token) {\n\t\theaders = new Headers({\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Token ${token}`\n\t\t});\n\t}\n\tconst response = await fetch(`https://conduit.productionready.io/api/articles?favorited=${username}`, { headers });\n\tconst json = await response.json();\n\n\treturn [replace(path('profile', 'articles'), json.articles)];\n});\n\nexport const setArticleTypeProcess = createProcess([setArticleTypeCommand]);\nexport const getProfileProcess = createProcess([clearProfileArticlesCommand, setUserNameCommand, getProfileCommand]);\nexport const getMyArticlesProcess = createProcess([clearProfileArticlesCommand, getMyArticlesCommand]);\nexport const getFavoritedArticlesProcess = createProcess([clearProfileArticlesCommand, getFavoritedCommand]);\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/processes/profileProcesses.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v, w } from '@dojo/widget-core/d';\n\nimport { ArticlePreview } from './ArticlePreview';\n\nexport interface ProfileProperties {\n\tusername: string;\n\tbio: string;\n\timage: string;\n\temail: string;\n\tarticles: any[];\n\tarticleType: string;\n\tonFav: Function;\n}\n\nexport class Profile extends WidgetBase<ProfileProperties> {\n\tprotected render() {\n\t\tlet { username, bio, image, articles, articleType, onFav } = this.properties;\n\n\t\tlet articleList = v('div', { classes: 'article-preview' }, ['Loading...']);\n\t\tarticles = articles ? articles.filter((article) => article.favorited || articleType === 'my') : articles;\n\t\tif (articles && articles.length === 0) {\n\t\t\tarticleList = v('div', { classes: 'article-preview' }, ['No articles here, yet!']);\n\t\t} else if (articles && articles.length > 0) {\n\t\t\tarticleList = v(\n\t\t\t\t'div',\n\t\t\t\tarticles.map((article, index) => {\n\t\t\t\t\treturn w(ArticlePreview, { key: index, article, onFav, view: 'profile' });\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\treturn v('div', { classes: 'profile-page' }, [\n\t\t\tv('div', { classes: 'user-info' }, [\n\t\t\t\tv('div', { classes: 'container' }, [\n\t\t\t\t\tv('div', { classes: 'row' }, [\n\t\t\t\t\t\tv('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n\t\t\t\t\t\t\tv('img', { src: image, classes: 'user-img' }),\n\t\t\t\t\t\t\tv('h4', [username]),\n\t\t\t\t\t\t\tv('p', [bio]),\n\t\t\t\t\t\t\tv('button', { classes: ['btn', 'btn-sm', 'btn-outline-secondary', 'action-btn'] }, [\n\t\t\t\t\t\t\t\tv('i', { classes: 'ion-plus-round' }),\n\t\t\t\t\t\t\t\t` Follow ${username}`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t]),\n\t\t\tv('div', { classes: 'container' }, [\n\t\t\t\tv('div', { classes: 'row' }, [\n\t\t\t\t\tv('div', { classes: ['col-xs-12', 'col-md-10', 'offset-md-1'] }, [\n\t\t\t\t\t\tv('div', { classes: 'articles-toggle' }, [\n\t\t\t\t\t\t\tv('ul', { classes: ['nav', 'nav-pills', 'outline-active'] }, [\n\t\t\t\t\t\t\t\tv('li', { classes: 'nav-item' }, [\n\t\t\t\t\t\t\t\t\tv(\n\t\t\t\t\t\t\t\t\t\t'a',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\thref: `#user/${username}`,\n\t\t\t\t\t\t\t\t\t\t\tclasses: ['nav-link', articleType === 'my' ? 'active' : null]\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t['My Articles']\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\tv('li', { classes: 'nav-item' }, [\n\t\t\t\t\t\t\t\t\tv(\n\t\t\t\t\t\t\t\t\t\t'a',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\thref: `#user/${username}/favorites`,\n\t\t\t\t\t\t\t\t\t\t\tclasses: ['nav-link', articleType === 'fav' ? 'active' : null]\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t['Favorited Articles']\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tarticleList\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t])\n\t\t]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Profile.ts"],"sourceRoot":""}