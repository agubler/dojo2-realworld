{"version":3,"sources":["webpack:///src/containers/EditorContainer.js","webpack:///./src/containers/EditorContainer.ts","webpack:///./src/processes/editorProcesses.ts","webpack:///./src/widgets/Editor.ts"],"names":["dojoWebpackJsonp_dojo2_realworld","85","module","exports","__webpack_require__","getProperties","store","properties","get","path","slug","editorProcesses_1","getArticleForEditor","title","description","content","tag","tags","errors","onContentInput","contentInput","onDescriptionInput","descInput","onTagCreate","addTag","onTagDelete","removeTag","onTagInput","tagInput","onTitleInput","titleInput","onPublishPost","publishArticle","Object","defineProperty","value","Container_1","Editor_1","EditorContainer","Container","Editor","89","buildErrorList","errorCategories","keys","errorList","i","length","tslib_1","__spread","map","error","_this","this","process_1","operations_1","commandFactory","createCommandFactory","titleInputCommand","_a","_b","__read","payload","replace","descriptionInputCommand","contentInputCommand","tagInputCommand","addTagCommand","at","add","clearTagInputCommand","removeTagCommand","index","indexOf","remove","getArticleForEditorCommand","__awaiter","response","json","__generator","_c","label","fetch","sent","article","startPublishCommand","publishArticleCommand","token","requestPayload","headers","url","body","tagList","Headers","Content-Type","Authorization","method","JSON","stringify","ok","undefined","createProcess","92","WidgetBase_1","d_1","_super","apply","arguments","__extends","prototype","_onTitleInput","event","target","_onDescriptionInput","_onContentInput","_onTagInput","_onTagCreate","keyCode","preventDefault","render","inProgress","_d","v","classes","type","placeholder","oninput","rows","onkeyup","onclick","disabled","WidgetBase"],"mappings":"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","file":"src/containers/EditorContainer.js","sourcesContent":["/*!\n * [Dojo](https://dojo.io/)\n * Copyright [JS Foundation](https://js.foundation/) & contributors\n * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)\n * All rights reserved\n * \n */\ndojoWebpackJsonp_dojo2_realworld([1],{\n\n/***/ 85:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Container_1 = __webpack_require__(18);\nvar Editor_1 = __webpack_require__(92);\nvar editorProcesses_1 = __webpack_require__(89);\nfunction getProperties(store, properties) {\n    var get = store.get, path = store.path;\n    if (properties.slug && properties.slug !== get(path('editor', 'slug'))) {\n        editorProcesses_1.getArticleForEditor(store)(properties.slug);\n    }\n    return {\n        title: get(path('editor', 'title')),\n        description: get(path('editor', 'description')),\n        content: get(path('editor', 'body')),\n        tag: get(path('editor', 'tag')),\n        tags: get(path('editor', 'tagList')),\n        errors: get(path('editor', 'errors')),\n        onContentInput: editorProcesses_1.contentInput(store),\n        onDescriptionInput: editorProcesses_1.descInput(store),\n        onTagCreate: editorProcesses_1.addTag(store),\n        onTagDelete: editorProcesses_1.removeTag(store),\n        onTagInput: editorProcesses_1.tagInput(store),\n        onTitleInput: editorProcesses_1.titleInput(store),\n        onPublishPost: editorProcesses_1.publishArticle(store)\n    };\n}\nexports.EditorContainer = Container_1.Container(Editor_1.Editor, 'state', { getProperties: getProperties });\n\n\n/***/ }),\n\n/***/ 89:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar _this = this;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(0);\nvar process_1 = __webpack_require__(9);\nvar operations_1 = __webpack_require__(10);\nvar commandFactory = process_1.createCommandFactory();\nvar titleInputCommand = commandFactory(function (_a) {\n    var path = _a.path, _b = tslib_1.__read(_a.payload, 1), title = _b[0];\n    return [operations_1.replace(path('editor', 'title'), title)];\n});\nvar descriptionInputCommand = commandFactory(function (_a) {\n    var path = _a.path, _b = tslib_1.__read(_a.payload, 1), description = _b[0];\n    return [operations_1.replace(path('editor', 'description'), description)];\n});\nvar contentInputCommand = commandFactory(function (_a) {\n    var path = _a.path, _b = tslib_1.__read(_a.payload, 1), content = _b[0];\n    return [operations_1.replace(path('editor', 'body'), content)];\n});\nvar tagInputCommand = commandFactory(function (_a) {\n    var path = _a.path, _b = tslib_1.__read(_a.payload, 1), tag = _b[0];\n    return [operations_1.replace(path('editor', 'tag'), tag)];\n});\nvar addTagCommand = commandFactory(function (_a) {\n    var get = _a.get, at = _a.at, path = _a.path, _b = tslib_1.__read(_a.payload, 1), tag = _b[0];\n    var length = (get(path('editor', 'tagList')) || []).length;\n    return [operations_1.add(at(path('editor', 'tagList'), length), tag)];\n});\nvar clearTagInputCommand = commandFactory(function (_a) {\n    var path = _a.path;\n    return [operations_1.replace(path('editor', 'tag'), '')];\n});\nvar removeTagCommand = commandFactory(function (_a) {\n    var get = _a.get, at = _a.at, path = _a.path, _b = tslib_1.__read(_a.payload, 1), tag = _b[0];\n    var tags = get(path('editor', 'tagList'));\n    var index = tags.indexOf(tag);\n    if (index !== -1) {\n        return [operations_1.remove(at(path('editor', 'tagList'), index))];\n    }\n    return [];\n});\nvar getArticleForEditorCommand = commandFactory(function (_a) {\n    var get = _a.get, at = _a.at, path = _a.path, _b = tslib_1.__read(_a.payload, 1), slug = _b[0];\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var response, json;\n        return tslib_1.__generator(this, function (_c) {\n            switch (_c.label) {\n                case 0: return [4 /*yield*/, fetch(\"https://conduit.productionready.io//api/articles/\" + slug)];\n                case 1:\n                    response = _c.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _c.sent();\n                    return [2 /*return*/, [operations_1.replace(path('editor'), json.article)]];\n            }\n        });\n    });\n});\nvar startPublishCommand = commandFactory(function (_a) {\n    var path = _a.path;\n    return [operations_1.replace(path('editor', 'inProgress'), true)];\n});\nvar publishArticleCommand = commandFactory(function (_a) {\n    var get = _a.get, path = _a.path, payload = _a.payload;\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var token, slug, requestPayload, headers, url, response, json;\n        return tslib_1.__generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    token = get(path('session', 'token'));\n                    slug = get(path('editor', 'slug'));\n                    requestPayload = {\n                        article: {\n                            title: get(path('editor', 'title')) || '',\n                            description: get(path('editor', 'description')) || '',\n                            body: get(path('editor', 'body')) || '',\n                            tagList: get(path('editor', 'tagList')) || []\n                        }\n                    };\n                    headers = new Headers({\n                        'Content-Type': 'application/json',\n                        Authorization: \"Token \" + token\n                    });\n                    url = slug\n                        ? \"https://conduit.productionready.io/api/articles/\" + slug\n                        : 'https://conduit.productionready.io/api/articles';\n                    return [4 /*yield*/, fetch(url, {\n                            method: slug ? 'put' : 'post',\n                            headers: headers,\n                            body: JSON.stringify(requestPayload)\n                        })];\n                case 1:\n                    response = _b.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    json = _b.sent();\n                    if (!response.ok) {\n                        return [2 /*return*/, [\n                                operations_1.replace(path('editor', 'inProgress'), false),\n                                operations_1.replace(path('editor', 'errors'), buildErrorList(json.errors))\n                            ]];\n                    }\n                    return [2 /*return*/, [\n                            operations_1.replace(path('article', 'article'), json.article),\n                            operations_1.replace(path('article', 'loaded'), true),\n                            operations_1.replace(path('editor'), undefined),\n                            operations_1.replace(path('routing', 'outlet'), 'article'),\n                            operations_1.replace(path('routing', 'params'), { slug: json.article.slug })\n                        ]];\n            }\n        });\n    });\n});\nfunction buildErrorList(errors) {\n    var errorCategories = Object.keys(errors);\n    var errorList = [];\n    var _loop_1 = function (i) {\n        errorList = tslib_1.__spread(errorList, errors[errorCategories[i]].map(function (error) { return errorCategories[i] + \" \" + error; }));\n    };\n    for (var i = 0; i < errorCategories.length; i++) {\n        _loop_1(i);\n    }\n    return errorList;\n}\nexports.titleInput = process_1.createProcess([titleInputCommand]);\nexports.descInput = process_1.createProcess([descriptionInputCommand]);\nexports.contentInput = process_1.createProcess([contentInputCommand]);\nexports.tagInput = process_1.createProcess([tagInputCommand]);\nexports.addTag = process_1.createProcess([addTagCommand, clearTagInputCommand]);\nexports.removeTag = process_1.createProcess([removeTagCommand]);\nexports.getArticleForEditor = process_1.createProcess([getArticleForEditorCommand]);\nexports.publishArticle = process_1.createProcess([startPublishCommand, publishArticleCommand]);\n\n\n/***/ }),\n\n/***/ 92:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(0);\nvar WidgetBase_1 = __webpack_require__(3);\nvar d_1 = __webpack_require__(2);\nvar Editor = /** @class */ (function (_super) {\n    tslib_1.__extends(Editor, _super);\n    function Editor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Editor.prototype._onTitleInput = function (event) {\n        this.properties.onTitleInput(event.target.value);\n    };\n    Editor.prototype._onDescriptionInput = function (event) {\n        this.properties.onDescriptionInput(event.target.value);\n    };\n    Editor.prototype._onContentInput = function (event) {\n        this.properties.onContentInput(event.target.value);\n    };\n    Editor.prototype._onTagInput = function (event) {\n        this.properties.onTagInput(event.target.value);\n    };\n    Editor.prototype._onTagCreate = function (event) {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n            this.properties.onTagCreate(event.target.value);\n        }\n    };\n    Editor.prototype.render = function () {\n        var _a = this.properties, onTagDelete = _a.onTagDelete, onPublishPost = _a.onPublishPost, title = _a.title, description = _a.description, content = _a.content, tag = _a.tag, _b = _a.errors, errors = _b === void 0 ? [] : _b, _c = _a.inProgress, inProgress = _c === void 0 ? false : _c, _d = _a.tags, tags = _d === void 0 ? [] : _d;\n        return d_1.v('div', { classes: 'editor-page' }, [\n            d_1.v('div', { classes: ['container', 'page'] }, [\n                d_1.v('div', { classes: 'row' }, [\n                    d_1.v('div', { classes: ['col-md-10', 'offset-md-1', 'col-xs-12'] }, [\n                        d_1.v('ul', { classes: 'error-messages' }, errors.map(function (error) { return d_1.v('li', [error]); })),\n                        d_1.v('form', [\n                            d_1.v('fieldset', [\n                                d_1.v('fieldset', { classes: 'form-group' }, [\n                                    d_1.v('input', {\n                                        classes: ['form-control', 'form-control-lg'],\n                                        type: 'text',\n                                        placeholder: 'Article Title',\n                                        value: title,\n                                        oninput: this._onTitleInput\n                                    })\n                                ]),\n                                d_1.v('fieldset', { classes: 'form-group' }, [\n                                    d_1.v('input', {\n                                        classes: 'form-control',\n                                        type: 'text',\n                                        placeholder: \"What's this article about?\",\n                                        value: description,\n                                        oninput: this._onDescriptionInput\n                                    })\n                                ]),\n                                d_1.v('fieldset', { classes: 'form-group' }, [\n                                    d_1.v('textarea', {\n                                        classes: 'form-control',\n                                        type: 'text',\n                                        rows: 8,\n                                        placeholder: 'Write your article (in markdown)',\n                                        value: content,\n                                        oninput: this._onContentInput\n                                    })\n                                ]),\n                                d_1.v('fieldset', { classes: 'form-group' }, [\n                                    d_1.v('input', {\n                                        classes: 'form-control',\n                                        type: 'text',\n                                        placeholder: 'Enter tags',\n                                        value: tag,\n                                        oninput: this._onTagInput,\n                                        onkeyup: this._onTagCreate\n                                    }),\n                                    d_1.v('div', { classes: 'tag-list' }, tags.map(function (tag) {\n                                        return d_1.v('span', { classes: ['tag-default', 'tag-pill'] }, [\n                                            d_1.v('i', {\n                                                classes: 'ion-close-round',\n                                                onclick: function () {\n                                                    onTagDelete(tag);\n                                                }\n                                            }),\n                                            tag\n                                        ]);\n                                    }))\n                                ]),\n                                d_1.v('button', {\n                                    classes: ['btn', 'btn-lg', 'pull-xs-right', 'btn-primary'],\n                                    type: 'button',\n                                    disabled: inProgress,\n                                    onclick: onPublishPost\n                                }, ['Publish Article'])\n                            ])\n                        ])\n                    ])\n                ])\n            ])\n        ]);\n    };\n    return Editor;\n}(WidgetBase_1.WidgetBase));\nexports.Editor = Editor;\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// src/containers/EditorContainer.js","import { Container } from '@dojo/widget-core/Container';\nimport { Store } from '@dojo/stores/Store';\nimport { Editor, EditorProperties } from './../widgets/Editor';\nimport {\n\tpublishArticle,\n\taddTag,\n\tcontentInput,\n\tdescInput,\n\tremoveTag,\n\ttagInput,\n\ttitleInput,\n\tgetArticleForEditor\n} from './../processes/editorProcesses';\n\nfunction getProperties(store: Store<any>, properties: EditorProperties): EditorProperties {\n\tconst { get, path } = store;\n\n\tif (properties.slug && properties.slug !== get(path('editor', 'slug'))) {\n\t\tgetArticleForEditor(store)(properties.slug);\n\t}\n\n\treturn {\n\t\ttitle: get(path('editor', 'title')),\n\t\tdescription: get(path('editor', 'description')),\n\t\tcontent: get(path('editor', 'body')),\n\t\ttag: get(path('editor', 'tag')),\n\t\ttags: get(path('editor', 'tagList')),\n\t\terrors: get(path('editor', 'errors')),\n\t\tonContentInput: contentInput(store),\n\t\tonDescriptionInput: descInput(store),\n\t\tonTagCreate: addTag(store),\n\t\tonTagDelete: removeTag(store),\n\t\tonTagInput: tagInput(store),\n\t\tonTitleInput: titleInput(store),\n\t\tonPublishPost: publishArticle(store)\n\t};\n}\n\nexport const EditorContainer = Container(Editor, 'state', { getProperties });\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader?{\"tsConfigFile\":\"/Users/Anthony/development/test-beds/dojo2-realworld/tslint.json\",\"emitErrors\":true,\"failOnHint\":true}!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/containers/EditorContainer.ts","import { createCommandFactory, createProcess } from '@dojo/stores/process';\nimport { PatchOperation } from '@dojo/stores/state/Patch';\nimport { replace, add, remove } from '@dojo/stores/state/operations';\n\nconst commandFactory = createCommandFactory<any>();\n\nconst titleInputCommand = commandFactory(({ path, payload: [title] }): PatchOperation[] => {\n\treturn [replace(path('editor', 'title'), title)];\n});\n\nconst descriptionInputCommand = commandFactory(({ path, payload: [description] }): PatchOperation[] => {\n\treturn [replace(path('editor', 'description'), description)];\n});\n\nconst contentInputCommand = commandFactory(({ path, payload: [content] }): PatchOperation[] => {\n\treturn [replace(path('editor', 'body'), content)];\n});\n\nconst tagInputCommand = commandFactory(({ path, payload: [tag] }): PatchOperation[] => {\n\treturn [replace(path('editor', 'tag'), tag)];\n});\n\nconst addTagCommand = commandFactory(({ get, at, path, payload: [tag] }): PatchOperation[] => {\n\tconst length = (get(path('editor', 'tagList')) || []).length;\n\treturn [add(at(path('editor', 'tagList'), length), tag)];\n});\n\nconst clearTagInputCommand = commandFactory(({ path }) => {\n\treturn [replace(path('editor', 'tag'), '')];\n});\n\nconst removeTagCommand = commandFactory(({ get, at, path, payload: [tag] }): PatchOperation[] => {\n\tconst tags = get(path('editor', 'tagList'));\n\tconst index = tags.indexOf(tag);\n\tif (index !== -1) {\n\t\treturn [remove(at(path('editor', 'tagList'), index))];\n\t}\n\treturn [];\n});\n\nconst getArticleForEditorCommand = commandFactory(async ({ get, at, path, payload: [slug] }) => {\n\tconst response = await fetch(`https://conduit.productionready.io//api/articles/${slug}`);\n\tconst json = await response.json();\n\treturn [replace(path('editor'), json.article)];\n});\n\nconst startPublishCommand = commandFactory(({ path }) => {\n\treturn [replace(path('editor', 'inProgress'), true)];\n});\n\nconst publishArticleCommand = commandFactory(async ({ get, path, payload }): Promise<PatchOperation[]> => {\n\tconst token = get(path('session', 'token'));\n\tconst slug = get(path('editor', 'slug'));\n\tconst requestPayload = {\n\t\tarticle: {\n\t\t\ttitle: get(path('editor', 'title')) || '',\n\t\t\tdescription: get(path('editor', 'description')) || '',\n\t\t\tbody: get(path('editor', 'body')) || '',\n\t\t\ttagList: get(path('editor', 'tagList')) || []\n\t\t}\n\t};\n\n\tconst headers = new Headers({\n\t\t'Content-Type': 'application/json',\n\t\tAuthorization: `Token ${token}`\n\t});\n\tconst url = slug\n\t\t? `https://conduit.productionready.io/api/articles/${slug}`\n\t\t: 'https://conduit.productionready.io/api/articles';\n\tconst response = await fetch(url, {\n\t\tmethod: slug ? 'put' : 'post',\n\t\theaders,\n\t\tbody: JSON.stringify(requestPayload)\n\t});\n\tconst json = await response.json();\n\n\tif (!response.ok) {\n\t\treturn [\n\t\t\treplace(path('editor', 'inProgress'), false),\n\t\t\treplace(path('editor', 'errors'), buildErrorList(json.errors))\n\t\t];\n\t}\n\n\treturn [\n\t\treplace(path('article', 'article'), json.article),\n\t\treplace(path('article', 'loaded'), true),\n\t\treplace(path('editor'), undefined),\n\t\treplace(path('routing', 'outlet'), 'article'),\n\t\treplace(path('routing', 'params'), { slug: json.article.slug })\n\t];\n});\n\nfunction buildErrorList(errors: { [index: string]: string[] }) {\n\tconst errorCategories = Object.keys(errors);\n\tlet errorList: any[] = [];\n\tfor (let i = 0; i < errorCategories.length; i++) {\n\t\terrorList = [...errorList, ...errors[errorCategories[i]].map((error: any) => `${errorCategories[i]} ${error}`)];\n\t}\n\treturn errorList;\n}\n\nexport const titleInput = createProcess([titleInputCommand]);\nexport const descInput = createProcess([descriptionInputCommand]);\nexport const contentInput = createProcess([contentInputCommand]);\nexport const tagInput = createProcess([tagInputCommand]);\nexport const addTag = createProcess([addTagCommand, clearTagInputCommand]);\nexport const removeTag = createProcess([removeTagCommand]);\nexport const getArticleForEditor = createProcess([getArticleForEditorCommand]);\nexport const publishArticle = createProcess([startPublishCommand, publishArticleCommand]);\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/processes/editorProcesses.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v } from '@dojo/widget-core/d';\n\nexport interface EditorProperties {\n\tonPublishPost: () => void;\n\tonTitleInput: Function;\n\tonDescriptionInput: Function;\n\tonContentInput: Function;\n\tonTagInput: Function;\n\tonTagCreate: Function;\n\tonTagDelete: Function;\n\ttitle: string;\n\tdescription: string;\n\tcontent: string;\n\ttag: string;\n\terrors?: string[];\n\tinProgress?: boolean;\n\tslug?: string;\n\ttags?: string[];\n}\n\nexport class Editor extends WidgetBase<EditorProperties> {\n\tprivate _onTitleInput(event: any) {\n\t\tthis.properties.onTitleInput(event.target.value);\n\t}\n\n\tprivate _onDescriptionInput(event: any) {\n\t\tthis.properties.onDescriptionInput(event.target.value);\n\t}\n\n\tprivate _onContentInput(event: any) {\n\t\tthis.properties.onContentInput(event.target.value);\n\t}\n\n\tprivate _onTagInput(event: any) {\n\t\tthis.properties.onTagInput(event.target.value);\n\t}\n\n\tprivate _onTagCreate(event: any) {\n\t\tif (event.keyCode === 13) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.properties.onTagCreate(event.target.value);\n\t\t}\n\t}\n\n\tprotected render() {\n\t\tconst {\n\t\t\tonTagDelete,\n\t\t\tonPublishPost,\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\tcontent,\n\t\t\ttag,\n\t\t\terrors = [],\n\t\t\tinProgress = false,\n\t\t\ttags = []\n\t\t} = this.properties;\n\t\treturn v('div', { classes: 'editor-page' }, [\n\t\t\tv('div', { classes: ['container', 'page'] }, [\n\t\t\t\tv('div', { classes: 'row' }, [\n\t\t\t\t\tv('div', { classes: ['col-md-10', 'offset-md-1', 'col-xs-12'] }, [\n\t\t\t\t\t\tv('ul', { classes: 'error-messages' }, errors.map((error: any) => v('li', [error]))),\n\t\t\t\t\t\tv('form', [\n\t\t\t\t\t\t\tv('fieldset', [\n\t\t\t\t\t\t\t\tv('fieldset', { classes: 'form-group' }, [\n\t\t\t\t\t\t\t\t\tv('input', {\n\t\t\t\t\t\t\t\t\t\tclasses: ['form-control', 'form-control-lg'],\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\tplaceholder: 'Article Title',\n\t\t\t\t\t\t\t\t\t\tvalue: title,\n\t\t\t\t\t\t\t\t\t\toninput: this._onTitleInput\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\tv('fieldset', { classes: 'form-group' }, [\n\t\t\t\t\t\t\t\t\tv('input', {\n\t\t\t\t\t\t\t\t\t\tclasses: 'form-control',\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\tplaceholder: \"What's this article about?\",\n\t\t\t\t\t\t\t\t\t\tvalue: description,\n\t\t\t\t\t\t\t\t\t\toninput: this._onDescriptionInput\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\tv('fieldset', { classes: 'form-group' }, [\n\t\t\t\t\t\t\t\t\tv('textarea', {\n\t\t\t\t\t\t\t\t\t\tclasses: 'form-control',\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\trows: 8,\n\t\t\t\t\t\t\t\t\t\tplaceholder: 'Write your article (in markdown)',\n\t\t\t\t\t\t\t\t\t\tvalue: content,\n\t\t\t\t\t\t\t\t\t\toninput: this._onContentInput\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\tv('fieldset', { classes: 'form-group' }, [\n\t\t\t\t\t\t\t\t\tv('input', {\n\t\t\t\t\t\t\t\t\t\tclasses: 'form-control',\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\tplaceholder: 'Enter tags',\n\t\t\t\t\t\t\t\t\t\tvalue: tag,\n\t\t\t\t\t\t\t\t\t\toninput: this._onTagInput,\n\t\t\t\t\t\t\t\t\t\tonkeyup: this._onTagCreate\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tv(\n\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t{ classes: 'tag-list' },\n\t\t\t\t\t\t\t\t\t\ttags.map((tag) => {\n\t\t\t\t\t\t\t\t\t\t\treturn v('span', { classes: ['tag-default', 'tag-pill'] }, [\n\t\t\t\t\t\t\t\t\t\t\t\tv('i', {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclasses: 'ion-close-round',\n\t\t\t\t\t\t\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonTagDelete(tag);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\ttag\n\t\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\tv(\n\t\t\t\t\t\t\t\t\t'button',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclasses: ['btn', 'btn-lg', 'pull-xs-right', 'btn-primary'],\n\t\t\t\t\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\t\t\t\t\tdisabled: inProgress,\n\t\t\t\t\t\t\t\t\t\tonclick: onPublishPost\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t['Publish Article']\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t])\n\t\t]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader??ref--0!./~/@dojo/webpack-contrib/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Editor.ts"],"sourceRoot":""}