/*!
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
dojoWebpackJsonp_dojo2_realworld([1],{85:function(t,e,r){"use strict";function o(t,e){var r=t.get,o=t.path;return e.slug&&e.slug!==r(o("editor","slug"))&&a.getArticleForEditor(t)(e.slug),{title:r(o("editor","title")),description:r(o("editor","description")),content:r(o("editor","body")),tag:r(o("editor","tag")),tags:r(o("editor","tagList")),errors:r(o("editor","errors")),onContentInput:a.contentInput(t),onDescriptionInput:a.descInput(t),onTagCreate:a.addTag(t),onTagDelete:a.removeTag(t),onTagInput:a.tagInput(t),onTitleInput:a.titleInput(t),onPublishPost:a.publishArticle(t)}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(18),i=r(92),a=r(89);e.EditorContainer=n.Container(i.Editor,"state",{getProperties:o})},89:function(t,e,r){"use strict";function o(t){for(var e=Object.keys(t),r=[],o=0;o<e.length;o++)!function(o){r=i.__spread(r,t[e[o]].map(function(t){return e[o]+" "+t}))}(o);return r}var n=this;Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),a=r(9),s=r(10),c=a.createCommandFactory(),l=c(function(t){var e=t.path,r=i.__read(t.payload,1),o=r[0];return[s.replace(e("editor","title"),o)]}),p=c(function(t){var e=t.path,r=i.__read(t.payload,1),o=r[0];return[s.replace(e("editor","description"),o)]}),u=c(function(t){var e=t.path,r=i.__read(t.payload,1),o=r[0];return[s.replace(e("editor","body"),o)]}),d=c(function(t){var e=t.path,r=i.__read(t.payload,1),o=r[0];return[s.replace(e("editor","tag"),o)]}),g=c(function(t){var e=t.get,r=t.at,o=t.path,n=i.__read(t.payload,1),a=n[0],c=(e(o("editor","tagList"))||[]).length;return[s.add(r(o("editor","tagList"),c),a)]}),v=c(function(t){var e=t.path;return[s.replace(e("editor","tag"),"")]}),f=c(function(t){var e=t.get,r=t.at,o=t.path,n=i.__read(t.payload,1),a=n[0],c=e(o("editor","tagList")),l=c.indexOf(a);return-1!==l?[s.remove(r(o("editor","tagList"),l))]:[]}),h=c(function(t){var e=(t.get,t.at,t.path),r=i.__read(t.payload,1),o=r[0];return i.__awaiter(n,void 0,void 0,function(){var t,r;return i.__generator(this,function(n){switch(n.label){case 0:return[4,fetch("https://conduit.productionready.io//api/articles/"+o)];case 1:return t=n.sent(),[4,t.json()];case 2:return r=n.sent(),[2,[s.replace(e("editor"),r.article)]]}})})}),_=c(function(t){var e=t.path;return[s.replace(e("editor","inProgress"),!0)]}),y=c(function(t){var e=t.get,r=t.path;t.payload;return i.__awaiter(n,void 0,void 0,function(){var t,n,a,c,l,p,u;return i.__generator(this,function(i){switch(i.label){case 0:return t=e(r("session","token")),n=e(r("editor","slug")),a={article:{title:e(r("editor","title"))||"",description:e(r("editor","description"))||"",body:e(r("editor","body"))||"",tagList:e(r("editor","tagList"))||[]}},c=new Headers({"Content-Type":"application/json",Authorization:"Token "+t}),l=n?"https://conduit.productionready.io/api/articles/"+n:"https://conduit.productionready.io/api/articles",[4,fetch(l,{method:n?"put":"post",headers:c,body:JSON.stringify(a)})];case 1:return p=i.sent(),[4,p.json()];case 2:return u=i.sent(),p.ok?[2,[s.replace(r("article","article"),u.article),s.replace(r("article","loaded"),!0),s.replace(r("editor"),void 0),s.replace(r("routing","outlet"),"article"),s.replace(r("routing","params"),{slug:u.article.slug})]]:[2,[s.replace(r("editor","inProgress"),!1),s.replace(r("editor","errors"),o(u.errors))]]}})})});e.titleInput=a.createProcess([l]),e.descInput=a.createProcess([p]),e.contentInput=a.createProcess([u]),e.tagInput=a.createProcess([d]),e.addTag=a.createProcess([g,v]),e.removeTag=a.createProcess([f]),e.getArticleForEditor=a.createProcess([h]),e.publishArticle=a.createProcess([_,y])},92:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),n=r(3),i=r(2),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype._onTitleInput=function(t){this.properties.onTitleInput(t.target.value)},e.prototype._onDescriptionInput=function(t){this.properties.onDescriptionInput(t.target.value)},e.prototype._onContentInput=function(t){this.properties.onContentInput(t.target.value)},e.prototype._onTagInput=function(t){this.properties.onTagInput(t.target.value)},e.prototype._onTagCreate=function(t){13===t.keyCode&&(t.preventDefault(),this.properties.onTagCreate(t.target.value))},e.prototype.render=function(){var t=this.properties,e=t.onTagDelete,r=t.onPublishPost,o=t.title,n=t.description,a=t.content,s=t.tag,c=t.errors,l=void 0===c?[]:c,p=t.inProgress,u=void 0!==p&&p,d=t.tags,g=void 0===d?[]:d;return i.v("div",{classes:"editor-page"},[i.v("div",{classes:["container","page"]},[i.v("div",{classes:"row"},[i.v("div",{classes:["col-md-10","offset-md-1","col-xs-12"]},[i.v("ul",{classes:"error-messages"},l.map(function(t){return i.v("li",[t])})),i.v("form",[i.v("fieldset",[i.v("fieldset",{classes:"form-group"},[i.v("input",{classes:["form-control","form-control-lg"],type:"text",placeholder:"Article Title",value:o,oninput:this._onTitleInput})]),i.v("fieldset",{classes:"form-group"},[i.v("input",{classes:"form-control",type:"text",placeholder:"What's this article about?",value:n,oninput:this._onDescriptionInput})]),i.v("fieldset",{classes:"form-group"},[i.v("textarea",{classes:"form-control",type:"text",rows:8,placeholder:"Write your article (in markdown)",value:a,oninput:this._onContentInput})]),i.v("fieldset",{classes:"form-group"},[i.v("input",{classes:"form-control",type:"text",placeholder:"Enter tags",value:s,oninput:this._onTagInput,onkeyup:this._onTagCreate}),i.v("div",{classes:"tag-list"},g.map(function(t){return i.v("span",{classes:["tag-default","tag-pill"]},[i.v("i",{classes:"ion-close-round",onclick:function(){e(t)}}),t])}))]),i.v("button",{classes:["btn","btn-lg","pull-xs-right","btn-primary"],type:"button",disabled:u,onclick:r},["Publish Article"])])])])])])])},e}(n.WidgetBase);e.Editor=a}});
//# sourceMappingURL=EditorContainer.js.map