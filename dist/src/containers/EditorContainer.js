/*!
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
dojoWebpackJsonp_dojo2_realworld([1],{104:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),n=r(3),i=r(2),a=r(94),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype._onTitleInput=function(t){this.properties.onTitleInput(t.target.value)},e.prototype._onDescriptionInput=function(t){this.properties.onDescriptionInput(t.target.value)},e.prototype._onContentInput=function(t){this.properties.onContentInput(t.target.value)},e.prototype._onTagInput=function(t){this.properties.onTagInput(t.target.value)},e.prototype._onTagCreate=function(t){13===t.keyCode&&(t.preventDefault(),this.properties.onTagCreate(t.target.value))},e.prototype.onAttach=function(){this.properties.getArticle(this.properties.slug)},e.prototype.render=function(){var t=this.properties,e=t.onTagDelete,r=t.onPublishPost,o=t.title,n=t.description,s=t.body,c=t.tag,p=t.errors,l=t.inProgress,u=void 0!==l&&l,d=t.tags,g=void 0===d?[]:d;return i.v("div",{classes:"editor-page"},[i.v("div",{classes:["container","page"]},[i.v("div",{classes:"row"},[i.v("div",{classes:["col-md-10","offset-md-1","col-xs-12"]},[p?i.w(a.ErrorList,{errors:p}):null,i.v("form",[i.v("fieldset",[i.v("fieldset",{classes:"form-group"},[i.v("input",{classes:["form-control","form-control-lg"],type:"text",placeholder:"Article Title",value:o,oninput:this._onTitleInput})]),i.v("fieldset",{classes:"form-group"},[i.v("input",{classes:"form-control",type:"text",placeholder:"What's this article about?",value:n,oninput:this._onDescriptionInput})]),i.v("fieldset",{classes:"form-group"},[i.v("textarea",{classes:"form-control",type:"text",rows:8,placeholder:"Write your article (in markdown)",value:s,oninput:this._onContentInput})]),i.v("fieldset",{classes:"form-group"},[i.v("input",{classes:"form-control",type:"text",placeholder:"Enter tags",value:c,oninput:this._onTagInput,onkeyup:this._onTagCreate}),i.v("div",{classes:"tag-list"},g.map(function(t){return i.v("span",{classes:["tag-default","tag-pill"]},[i.v("i",{classes:"ion-close-round",onclick:function(){e(t)}}),t])}))]),i.v("button",{classes:["btn","btn-lg","pull-xs-right","btn-primary"],type:"button",disabled:u,onclick:r},["Publish Article"])])])])])])])},e}(n.WidgetBase);e.Editor=s},89:function(t,e,r){"use strict";function o(t,e){var r=t.get,o=t.path;return{title:r(o("editor","title")),description:r(o("editor","description")),body:r(o("editor","body")),tag:r(o("editor","tag")),tags:r(o("editor","tagList")),errors:r(o("errors")),onContentInput:a.contentInput(t),onDescriptionInput:a.descInput(t),onTagCreate:a.addTag(t),onTagDelete:a.removeTag(t),onTagInput:a.tagInput(t),onTitleInput:a.titleInput(t),onPublishPost:a.publishArticle(t),getArticle:a.getArticleForEditor(t),slug:e.slug}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(18),i=r(104),a=r(96);e.EditorContainer=n.Container(i.Editor,"state",{getProperties:o})},94:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),n=r(3),i=r(2),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.render=function(){for(var t=this.properties.errors,e=Object.keys(t),r=[],n=0;n<e.length;n++)!function(n){r=o.__spread(r,t[e[n]].map(function(t){return e[n]+" "+t}))}(n);return i.v("ul",{classes:"error-messages"},r.map(function(t){return i.v("li",[t])}))},e}(n.WidgetBase);e.ErrorList=a},96:function(t,e,r){"use strict";var o=this;Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(11),a=r(12),s=i.createCommandFactory(),c=s(function(t){var e=t.path,r=n.__read(t.payload,1),o=r[0];return[a.replace(e("editor","title"),o)]}),p=s(function(t){var e=t.path,r=n.__read(t.payload,1),o=r[0];return[a.replace(e("editor","description"),o)]}),l=s(function(t){var e=t.path,r=n.__read(t.payload,1),o=r[0];return[a.replace(e("editor","body"),o)]}),u=s(function(t){var e=t.path,r=n.__read(t.payload,1),o=r[0];return[a.replace(e("editor","tag"),o)]}),d=s(function(t){var e=t.get,r=t.at,o=t.path,i=n.__read(t.payload,1),s=i[0],c=(e(o("editor","tagList"))||[]).length;return[a.add(r(o("editor","tagList"),c),s)]}),g=s(function(t){var e=t.path;return[a.replace(e("editor","tag"),"")]}),v=s(function(t){var e=t.get,r=t.at,o=t.path,i=n.__read(t.payload,1),s=i[0],c=e(o("editor","tagList")),p=c.indexOf(s);return-1!==p?[a.remove(r(o("editor","tagList"),p))]:[]}),f=s(function(t){var e=(t.get,t.at,t.path),r=n.__read(t.payload,1),i=r[0];return n.__awaiter(o,void 0,void 0,function(){var t,r;return n.__generator(this,function(o){switch(o.label){case 0:return[4,fetch("https://conduit.productionready.io//api/articles/"+i)];case 1:return t=o.sent(),[4,t.json()];case 2:return r=o.sent(),[2,[a.replace(e("editor"),r.article)]]}})})}),h=s(function(t){var e=t.path;return[a.replace(e("editor","loading"),!0)]}),_=s(function(t){var e=t.get,r=t.path;t.payload;return n.__awaiter(o,void 0,void 0,function(){var t,o,i,s,c,p,l;return n.__generator(this,function(n){switch(n.label){case 0:return t=e(r("user","token")),o=e(r("editor","slug")),i={article:{title:e(r("editor","title"))||"",description:e(r("editor","description"))||"",body:e(r("editor","body"))||"",tagList:e(r("editor","tagList"))||[]}},s=new Headers({"Content-Type":"application/json",Authorization:"Token "+t}),c=o?"https://conduit.productionready.io/api/articles/"+o:"https://conduit.productionready.io/api/articles",[4,fetch(c,{method:o?"put":"post",headers:s,body:JSON.stringify(i)})];case 1:return p=n.sent(),[4,p.json()];case 2:return l=n.sent(),p.ok?[2,[a.replace(r("article","item"),l.article),a.replace(r("article","loaded"),!0),a.replace(r("editor"),void 0),a.replace(r("routing","outlet"),"article"),a.replace(r("routing","params"),{slug:l.article.slug})]]:[2,[a.replace(r("editor","loading"),!1),a.replace(r("errors"),l.errors)]]}})})});e.titleInput=i.createProcess([c]),e.descInput=i.createProcess([p]),e.contentInput=i.createProcess([l]),e.tagInput=i.createProcess([u]),e.addTag=i.createProcess([d,g]),e.removeTag=i.createProcess([v]),e.getArticleForEditor=i.createProcess([f]),e.publishArticle=i.createProcess([h,_])}});
//# sourceMappingURL=EditorContainer.js.map